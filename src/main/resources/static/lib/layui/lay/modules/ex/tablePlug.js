/** layui-v2.5.4 MIT License By https://www.layui.com */
 ;layui.define(["table"],function(e){"use strict";function a(e,t,n){t=t||window,e=e.length?e.get(0):e;var r={};if(n&&t.top!==t.self){var i=t.frames.frameElement;r=a(i,t.parent,n)}var o=e.getBoundingClientRect();return{top:o.top+(r.top||0),left:o.left+(r.left||0)}}var t="2.0.0",n="tablePlug",r=layui.cache.modules[n]||"";r.substr(0,r.lastIndexOf("/"));layui.addcss("modules/ex/tablePlug.css?v"+t);var i=layui.$,o=layui.layer,l=layui.form,c=layui.table;layui.use("optimizeSelectOption");var u,s=c.check,f=c.getIns,d={version:t},p=function(e){return"[object Array]"===Object.prototype.toString.call(e)},y="layui-table-click";d.set=function(e){i.extend(!0,c.config,e||{})},d.set({pageLanguageText:{en:{jumpTo:"jump to",page:"page",go:"go",total:"total",unit:"",optionText:"limit each page"}}}),c.Class.prototype.initTable=function(){var e=this;e.config;e.layFixed.find("tbody").html(""),e.layFixed.addClass(HIDE),e.layTotal.addClass(HIDE),e.layPage.addClass(HIDE),e.layMain.find("tbody").html(""),e.layMain.find("."+NONE).remove(),e.layHeader.find('input[name="layTableCheckbox"]').prop("checked",!1),e.renderForm("checkbox")},i(window).resize(function(){o.close(u)});l.on("checkbox",function(e){i(e.elem).change()});var g=function(){var e="tablePlug_col_filter_record",a=function(e){return"local"===e?"data":"sessionData"};return{set:function(t,n,r,i){if(t&&n){var o=a(i),l=this.get(t,i);l[n]=!r,layui[o](e,{key:t,value:l})}},get:function(t,n){return layui[a(n)](e)[t]||{}},clear:function(a){i.each(["data","sessionData"],function(t,n){layui[n](e,{key:a,remove:!0})})}}}(),h=function(e,a){var t=this,n={},r=t.config,i=t.layMain.scrollTop(),o=t.layMain.scrollLeft();return e=e>=0?e:t.layBody.find("tr."+y).data("index"),n[r.response.statusName]=r.response.statusCode,n[r.response.msgName]="数据更新",n[r.response.dataName]=c.cache[r.id],n[r.response.countName]=t.count||(r.page?r.page.count:r.data.length),a&&t.layHeader.find(".layui-table-sort[lay-sort]").attr("lay-sort",""),t.renderData(n,t.page,n[r.response.countName],a),t.layBody.scrollTop(i),t.layMain.scrollLeft(o),"function"==typeof r.done&&r.done(n,t.page,n[r.response.countName]),e>=0&&setTimeout(function(){t.setThisRowChecked(e)},0),t},m=function(e,a,t){var n=this;if(!a&&0!==a||!t&&0!==t||a<0||t<0||a===t)return n;var r=f(e);if(r){var i=(r.config,c.cache[e]);if(!i||!i[a]||!i[t])return n;i.splice(t,0,i.splice(a,1)[0]),h.call(r,t,!0)}return n},v=function(e,a,t){var n=this;if(!e)return console.warn("tableId不能为空"),n;if(a&&("object"==typeof a||p(a))&&(t=a,a=""),(null===a||isNaN(a))&&(a=""),t&&"object"!=typeof t&&!p(t))return console.warn("data格式必须是对象或者数组"),n;var r=f(e);if(r){var o=c.cache[e],l=r.config;if(!t)return h.call(r),n;p(t)&&(a=""),""!==a?i.extend(!0,o[a],t):(p(t)||(t=[t]),l.primaryKey?layui.each(t,function(e,a){a[l.primaryKey]&&layui.each(o,function(e,t){if(t[l.primaryKey]===a[l.primaryKey])return i.extend(!0,o[e],a),!0})}):i.extend(!0,o,t)),h.call(r)}return n},b=function(e,a){var t=this;if(!e)return console.warn("tableId不能为空"),t;if(!a)return console.warn("data不能为空"),t;var n=f(e);if(n){var r=n.config;if(r.url)return c.reload(e),t;if(p(r.data)){if("object"!=typeof a&&!p(a))return console.warn("data必须是对象或者数组"),t;p(a)||(a=[a]);var i=c.getPrimaryKey(r);layui.each(a,function(e,a){i&&(a[i]||(a[i]="idTemp_"+(new Date).getTime()+"_"+Math.round(1e6*Math.random()))),r.data.push(a)}),c.reload(e)}return t}},x=function(e,a){var t=this;if(!e)return console.warn("tableId不能为空"),t;if(!a&&0!==a)return console.warn("data不能为空"),t;var n=f(e);if(n){var r=n.config,i={},o=n.count||(r.page?r.page.count:r.data.length),l=getPrimaryKey(r);if(r.url){if(r.page){o-=p(a)?a.length:1,i.page={};var u=Math.ceil(o/r.page.limit);i.page.curr=0===o?1:n.page>u?u||1:n.page}return layui.each(a,function(a,t){var n="object"==typeof t?t[l]:t;s.update(e,n,!1)}),c.reload(e,i),t}if(p(r.data)){if("object"==typeof a||p(a))p(a)||(a=[a]),layui.each(a,function(a,t){l&&t&&"object"==typeof t&&!t[l]||layui.each(r.data,function(a,n){if(t===n[l]||t[l]===n[l])return r.data.splice(a,1),s.update(e,n[l],!1),o-=1,!0})});else{if(isNaN(a))return t;var d;if(r.page?a<r.page.limit&&(d=r.data.splice((n.page-1)*r.page.limit+a,1)):d=r.data.splice(a,1),!d.length)return t;o-=1,s.update(e,d[0][l],!1)}if(r.page){i.page={};var u=Math.ceil(o/r.page.limit);i.page.curr=0===o?1:n.page>u?u||1:n.page}c.reload(e,i)}return t}};i.extend(d,{tableCheck:s,colFilterRecord:g,getConfig:c.getConfig,disabledCheck:c.disabledCheck,getPosition:a,move:m,moveUp:function(e,a){return m.call(this,e,a,a-1)},moveDown:function(e,a){return m.call(this,e,a,a+1)},update:v,addData:b,del:x,refresh:c.refresh,renderTotal:c.renderTotal}),e(n,d)});