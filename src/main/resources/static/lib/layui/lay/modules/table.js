/** layui-v2.5.4 MIT License By https://www.layui.com */
 ;layui.define(["laytpl","laypage","layer","form","util"],function(e){"use strict";var t=layui.$,a=layui.laytpl,i=layui.laypage,l=layui.layer,n=layui.form,o=(layui.util,layui.hint()),r=layui.device(),c={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var a=this;return a.config=t.extend({},a.config,e),a},on:function(e,t){return layui.onevent.call(this,f,e,t)},off:function(e,t){return layui.offevent.call(this,f,e,t)}},d=function(){var e=this,t=e.config,a=t.id||t.index;return a&&(d.that[a]=e,d.config[a]=t),{config:t,reload:function(t){e.reload.call(e,t)},setColsWidth:function(){e.setColsWidth.call(e)},resize:function(){e.resize.call(e)}}},s=function(e){var t=d.config[e];return t||o.error("The ID option was not found in the table instance"),t||null},u=function(e,i,l,n){var o=e.templet?function(){return"function"==typeof e.templet?e.templet(l):a(t(e.templet).html()||String(i)).render(l)}():i;return n?t("<div>"+o+"</div>").text():o},f="table",h=".layui-table",y="layui-hide",p="layui-none",v="layui-table-view",m=".layui-table-tool",g=".layui-table-box",b=".layui-table-init",x=".layui-table-header",k=".layui-table-body",C=".layui-table-main",T=".layui-table-fixed",w=".layui-table-fixed-l",S=".layui-table-fixed-r",A=".layui-table-total",D=".layui-table-page",L=".layui-table-sort",R="layui-table-edit",_="layui-table-hover",N=function(e){var t='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';return e=e||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return e.fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),"{{# var isSort = !(item2.colGroup) && item2.sort; }}",'<th data-field="{{ item2.field||i2 }}" data-key="{{d.index}}-{{i1}}-{{i2}}" {{# if( item2.parentKey){ }}data-parentkey="{{ item2.parentKey }}"{{# } }} {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+t+' {{# if(item2.unresize || item2.colGroup){ }}data-unresize="true"{{# } }} class="{{# if(item2.hide){ }}layui-hide{{# } }}{{# if(isSort){ }} layui-unselect{{# } }}{{# if(!item2.field){ }} layui-table-col-special{{# } }}">','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colGroup){ }}","group","{{# } else { }}","{{d.index}}-{{i1}}-{{i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(isSort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc" title="升序"></i><i class="layui-edge layui-table-sort-desc" title="降序"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},F=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),j=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" lay-id="{{ d.data.id }}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool">','<div class="layui-table-tool-temp"></div>','<div class="layui-table-tool-self"></div>',"</div>","{{# } }}",'<div class="layui-table-box">',"{{# if(d.data.loading){ }}",'<div class="layui-table-init" style="background-color: #fff;">','<i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i>',"</div>","{{# } }}","{{# var left, right; }}",'<div class="layui-table-header">',N(),"</div>",'<div class="layui-table-body layui-table-main">',F,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',N({fixed:!0}),"</div>",'<div class="layui-table-body">',F,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',N({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',F,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.totalRow){ }}",'<div class="layui-table-total">','<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>','<tbody><tr><td><div class="layui-table-cell" style="visibility: hidden;">Total</div></td></tr></tbody>',"</table>","</div>","{{# } }}","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{i1}}-{{i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),I=t(window),O=t(document),W=function(e){var a=this;a.index=++c.index,a.config=t.extend({},a.config,c.config,e),a.render()};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,a){return t.inArray(e,this,a)}),Array.prototype.map||(Array.prototype.map=function(e){return t.map(this,e)});var H=function(e){return"[object Array]"===Object.prototype.toString.call(e)},z={},E="additional",P="removed",B="original",M="disabled",K="layui-table-fixed-scroll",q=["numbers","checkbox","radio"],G=function(e){return d.config[e]||z[e]&&z[e].config||{}},Y=function(e){return e?d.that[e]:d.that},X=function(){var e={};return{check:function(t){return!!e[t]},reset:function(t){e[t]?(this.set(t,E,[]),this.set(t,P,[])):(e[t]={},e[t][B]=[],e[t][E]=[],e[t][P]=[],e[t][M]=[])},init:function(e,t,a){this.reset(e);var i=[];i=t&&t.length&&"object"==typeof t[0]?Z(e,t,a):t,this.set(e,B,i)},disabled:function(t,a){e[t]||this.reset(t),this.set(t,M,a)},checkDisabled:function(e,t){return this.get(e,M).indexOf(t)!==-1},getChecked:function(e){var t=this.get(e,P),a=this.get(e,B).concat(this.get(e,E)),i=[];return layui.each(a,function(e,a){t.indexOf(a)===-1&&i.indexOf(a)===-1&&i.push(a)}),i},get:function(t,a){return a===E||a===P||a===B||a===M?e[t]?e[t][a]||[]:[]:e[t]},set:function(t,a,i){a!==B&&a!==E&&a!==P&&a!==M||(e[t][a]=i&&H(i)?i:[])},update:function(t,a,i,l){var n=e[t][B],o=e[t][E],r=e[t][P];i?(l&&o.splice(0,1),n.indexOf(a)===-1?o.indexOf(a)===-1&&o.push(a):l||r.indexOf(a)===-1||r.splice(r.indexOf(a),1)):n.indexOf(a)===-1?o.indexOf(a)!==-1&&o.splice(o.indexOf(a),1):r.indexOf(a)===-1&&r.push(a)}}}(),V=function(e){if("string"==typeof e&&(e=G(e)),e.primaryKey)return e.primaryKey;var t=e.checkStatus&&e.checkStatus.primaryKey,a=e.checkDisabled&&e.checkDisabled.primaryKey;return t&&a&&t!==a&&layui.hint().error("注意：当前表格("+e.id+")中checkStatus和checkDisabled都配置了primaryKey,但是他们不是同一个字段，必须保持表格配置中主键是唯一的，建议直接设置在顶层配置中就可以了！"),a||t||"id"},$=function(e,t,a){if(e&&t&&(a=a||G(t),a&&a.checkStatus))for(var i=X.getChecked(t),l=0;l<e.length;l++)e[l][c.config.checkName]=i.indexOf(e[l][V(a)])!==-1},U=function(e,t){var a;if("string"==typeof e?a=G(e):(a=e.config,e=a?a.id:""),a){var i=a.elem.next();t&&(a.checkDisabled=a.checkDisabled||{},a.checkDisabled.enabled=a.checkDisabled.enabled||!0,a.checkDisabled.data=X.get(e,M)||[]),a.checkDisabled&&a.checkDisabled.enabled?layui.each(c.cache[e],function(t,l){i.find(".layui-table-body").find('tr[data-index="'+t+'"]').find('input[name="layTableCheckbox"],[lay-type="layTableRadio"]').prop("disabled",X.checkDisabled(e,l[V(a)]))}):X.set(e,M,[]),i.find('input[lay-filter="layTableAllChoose"]').prop("checked",c.checkStatus(e).isAll),n.render("checkbox",i.attr("lay-filter")),n.render("radio",i.attr("lay-filter"))}},J=function(e){var t=this,a=t.config;e&&(t.layBody.scrollTop(0),t.layBody.scrollLeft(0)),U(t),layui.each(t.tempData,function(e,a){t.addTemp(e+1,a,null,!0)}),a.reversal===!0&&t.reverse(),t.layBody.find('input[type="checkbox"][name="layTableCheckbox"]').attr("lay-filter","layTableCheckbox"),ee(t),Z(a)},Q={},Z=function(e,t,a){var i="string"==typeof e?G(e):e;return a=a||V(i),i.checkStatus&&a&&(Q[i.id]=Q[i.id]||{},layui.each(t||c.cache[i.id]||[],function(e,t){Q[i.id][t[a]]=t})),(t||c.cache[i.id]||[]).map(function(e){return e[a]})},ee=function(e,a,i){var l=this;if(!e)return console.warn("tableId不能为空"),l;var n;if("string"==typeof e?n=Y(e):(n=e,e=n.key||(n.config?n.config.id:"")),!n||!e)return console.warn("找不到id为",e,"的实例"),l;var o=n.config;if(!o.totalRow)return l;var r=n.layTotal;return a?(r.find('td[data-field="'+a+'"] div.layui-table-cell').html(i||""),l):void c.eachCols(e,function(a,i){if(i.totalRow&&!i.totalRowText&&i.field){var l,n=i.field,d=i.totalFormat||"sum",s=t.extend([],c.cache[e]);if("function"==typeof d)l=d.call(o,e,s,n);else switch(l=0,d){case"sum":layui.each(s,function(e,t){l+=parseFloat(t[n])||0})}l&&r.find('td[data-field="'+n+'"] div.layui-table-cell').html(l||"")}})},te=function(){var e="tablePlug_col_filter_record",a=function(e){return"local"===e?"data":"sessionData"};return{set:function(t,i,l,n){if(t&&i){var o=a(n),r=this.get(t,n);r[i]=!l,layui[o](e,{key:t,value:r})}},get:function(t,i){return layui[a(i)](e)[t]||{}},clear:function(a){t.each(["data","sessionData"],function(t,i){layui[i](e,{key:a,remove:!0})})}}}(),ae=function(){var e=["url","method","where","contentType","headers","parseData","request","response","data","page","initSort","autoSort","reversal"],a=["id","elem","cols","width","height"];return{getParams:function(){return t.extend(!0,[],e)},getParamsBlacklist:function(){return t.extend(!0,[],a)},registerBlacklist:function(){console.warn("registerBlacklist:不建议自己调用改方法将参数加入查询参数的黑名单，除非是在非常了解该功能的前提下");var e=this;layui.each(arguments,function(t,i){H(i)?e.registerBlacklist.apply(e,i):"string"==typeof i&&a.indexOf(i)===-1&&a.push(i)})}}}();c.addTemp=function(e,t,a){var i=Y(e);"function"==typeof t&&(a=t,t={}),i&&i.addTemp(c.getTemp(e).numbers,t&&"object"==typeof t?t:{},a)},c.getTemp=function(e){for(var t=c.cache[e]||[],a=[],i=1;t[-i];i++)H(t[-i])||a.push(t[-i]);return{data:a,numbers:i}},c.cleanTemp=function(e,a){var i=Y(e),l=c.getTemp(e),n=c.cache[e]||[];if(l.data.length)for(var o=l.numbers,r=1;r<o&&(!n[-r]||a&&-r!==a||(n[-r]=[],!a));r++);t('div.layui-table-view[lay-id="'+e+'"]').removeClass("has-data-temp-warn").find("tr.layui-tablePlug-data-temp[data-index"+(a?'="'+a+'"':"")+"]").remove(),c.resize(e),i.layBody.scrollTop(i.layBody[0].scrollHeight)},W.prototype.addTemp=function(e,a,i,l){var n=this,o=[],r=[],d=[],s=n.config,f=a||{};e=-e,n.layBody.find('tr[data-index="'+e+'"]').length||(c.cache[n.key][e]=f,n.eachCols(function(a,i){var l=i.field||a,n=s.index+"-"+i.key,c=f[l];if(void 0!==c&&null!==c||(c=""),!i.colGroup){var h=['<td data-field="'+l+'" data-key="'+n+'" '+function(){var e=[];return"normal"===i.type&&i.edit!==!1&&e.push('data-edit="text"'),i.align&&e.push('align="'+i.align+'"'),i.templet&&e.push('data-content="'+c+'"'),i.event&&e.push('lay-event="'+i.event+'"'),i.style&&e.push('style="'+i.style+'"'),i.minWidth&&e.push('data-minwidth="'+i.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return i.hide&&e.push(y),i.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){return"normal"===i.type?n:n+" laytable-cell-"+i.type}()+'">'+function(){var a=t.extend(!0,{LAY_INDEX:e},f);switch(i.type){case"checkbox":case"radio":case"numbers":return""}return i.toolbar?"":u(i,c,a)}(),"</div></td>"].join("");d.push(h),i.fixed&&"right"!==i.fixed&&o.push(h),"right"===i.fixed&&r.push(h)}}),n.layMain.find("."+p).remove(),n.elem.removeClass("layui-table-none-overflow"),n.layMain.find("tbody").append('<tr class="layui-tablePlug-data-temp" data-index="'+e+'">'+d.join("")+"</tr>"),n.layFixLeft.removeClass(y).find("tbody").append('<tr class="layui-tablePlug-data-temp" data-index="'+e+'">'+o.join("")+"</tr>"),n.layFixRight.find("tbody").append('<tr class="layui-tablePlug-data-temp" data-index="'+e+'">'+r.join("")+"</tr>"),n.renderForm(),n.resize(),l||n.layBody.scrollTop(n.layBody[0].scrollHeight),n.layBody.find('tr.layui-tablePlug-data-temp[data-index="'+e+'"]').find("td:first-child").append('<div class="close_temp"></div>'),n.layFixRight.find(".close_temp").remove(),"function"==typeof i&&i.call(n.config,n.layBody.find('tr[data-index="'+e+'"]')))},O.on("click",".layui-table-view tr.layui-table-hover.layui-tablePlug-data-temp div.close_temp",function(e){layui.stope(e);var a=t(this),i=a.closest("tr"),l=i.closest(".layui-table-view").attr("lay-id");c.cleanTemp(l,i.data("index"))}),W.prototype.reverse=function(){var e=this,t=e.config,a=t.reversal;return e.elem[a?"addClass":"removeClass"]("vertical"),setTimeout(function(){e.layTotal.css({top:a?e.layTool.outerHeight()-1+"px":0}),e.layMain.css({marginLeft:a?e.layHeader.width()+"px":0,marginRight:a&&t.totalRow?e.layTotal.width()+"px":0}),a||e.layHeader.scrollLeft(e.layMain.scrollLeft())},0),e},c.reverse=function(e,t,a){if(e){var i=a||c.getIns(e),l=i.config;"boolean"!=typeof t&&(t=!l.reversal),l.reversal=t,i.reverse(),i.resize()}else layui.each(Y(),function(e,a){c.reverse(e,t,a)})},c.disabledCheck=function(e,t){X.disabled(e,t||[]),U(e,!0)},O.off("click",".layui-table-tips-main [lay-event]").on("click",".layui-table-tips-main [lay-event]",function(e){var a=t(this),i=c._tableTdCurr;if(i){var n=a.closest(".layui-table-tips").attr("times");l.close(n),c._tableTdCurr.find("[lay-event]:eq("+a.index()+")").click()}});var ie=function(e){e=!!e,O.off("mouseenter","."+v+" "+S+" "+k).off("mouseleave","."+v+" "+S+" "+k).off("mouseenter","."+v+" "+w+" "+k).off("mouseleave","."+v+" "+w+" "+k).off("mouseenter","."+v+" "+T+" "+x),e&&O.on("mouseenter","."+v+" "+S+" "+k,function(e){var a=t(this),i=a.closest(S);"-1px"!==i.css("right")?i.addClass(K):setTimeout(function(){"-1px"!==i.css("right")&&(console.log("出现了一开始还没有打滚动条补丁的时候就触发的情况"),i.addClass(K))},50)}).on("mouseleave","."+v+" "+S+" "+k,function(e){t(this).closest(S).removeClass(K)}).on("mouseenter","."+v+" "+w+" "+k,function(e){var a=t(this),i=a.closest(w);i.addClass(K);var l=i.find(x).find("table").width(),n=i.find(x).width()+1;i.css({width:l+"px"}).find(k).css({width:n+"px"})}).on("mouseleave","."+v+" "+w+" "+k,function(e){t(this).css({width:"auto"}).closest(w).css({width:"auto"}).removeClass(K)}).on("mouseenter","."+v+" "+T+" "+x,function(e){var a=t(this);a.closest(T).removeClass(K)})};ie(!0);var le=function(e,a){var i=this,l=le.timer;if(e===!1)return layui.each(l,function(e,t){le.clear(e)}),i;if(!e)return console.warn("tableId不能为空"),i;var n;if(n="string"==typeof e?Y(e):e,!n)return console.warn("找不到id为",e,"的实例"),i;e=o.id;var o=n.config;return a===!1?(le.clear(e),i):a||0===a?((a===!0||a<50)&&(a=50),le.clear(e),void(l[e]={time:a,index:setInterval(function(){t(document).find(o.elem).length?le(e):le.call(i,e,!1)},a)})):(n.pullData(n.page,!0),i)};le.timer={},le.clear=function(e){if(le.timer[e]){clearInterval(le.timer[e].index);var t=le.timer[e].time;return delete le.timer[e],t}},le.reset=function(e,t){le(t||e,le.clear(e))},c.refresh=le,c.renderTotal=ee,c.getPrimaryKey=V,c.getIns=Y,c.getTableIns=function(e){return z[e]},c.check=X,c.Class=W,W.prototype.config={limit:10,loading:!0,cellMinWidth:60,defaultToolbar:["filter","exports","print"],autoSort:!0,text:{none:"无数据"}},W.prototype.render=function(){var e=this,i=e.config;if(i.elem=t(i.elem),i.where=i.where||{},i.id=i.id||i.elem.attr("id")||e.index,i.request=t.extend({pageName:"page",limitName:"limit"},i.request),i.response=t.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},i.response),"object"==typeof i.page&&(i.limit=i.page.limit||i.limit,i.limits=i.page.limits||i.limits,e.page=i.page.curr=i.page.curr||1,delete i.page.elem,delete i.page.jump),!i.elem[0])return e;i.height&&/^full-\d+$/.test(i.height)&&(e.fullHeightGap=i.height.split("-")[1],i.height=I.height()-e.fullHeightGap),e.setInit();var l=i.elem,n=l.next("."+v),o=e.elem=t(a(j).render({VIEW_CLASS:v,data:i,index:e.index}));if(i.index=e.index,e.key=i.id||i.index,n[0]&&n.remove(),l.after(o),e.layTool=o.find(m),e.layBox=o.find(g),e.layHeader=o.find(x),e.layMain=o.find(C),e.layBody=o.find(k),e.layFixed=o.find(T),e.layFixLeft=o.find(w),e.layFixRight=o.find(S),e.layTotal=o.find(A),e.layPage=o.find(D),e.renderToolbar(),e.fullSize(),i.cols.length>1){var r=e.layFixed.find(x).find("th");r.height(e.layHeader.height()-1-parseFloat(r.css("padding-top"))-parseFloat(r.css("padding-bottom")))}e.pullData(e.page),e.events()},W.prototype.initOpts=function(e){var t=this,a=(t.config,{checkbox:48,radio:48,space:15,numbers:40});e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||a[e.type])},W.prototype.setInit=function(e){var t=this,a=t.config,i=a.id;if(a.clientWidth=a.width||function(){var e=function(t){var i,l;t=t||a.elem.parent(),i=t.width();try{l="none"===t.css("display")}catch(n){}return!t[0]||i&&!l?i:e(t.parent())};return e()}(),"width"===e)return a.clientWidth;delete d.cols[i],X.check(i)?a.checkStatus&&a.checkStatus["default"]&&X.set(i,B,a.checkStatus["default"]):X.init(i,a.checkStatus?a.checkStatus["default"]||[]:[]),a.checkDisabled&&H(a.checkDisabled.data)&&a.checkDisabled.data.length&&X.disabled(i,H(a.checkDisabled.data)?a.checkDisabled.data:[]);var l;a.colFilterRecord?l=te.get(i,a.colFilterRecord):te.clear(i);var n=function(e,i,o,r){if(!r)return void i.splice(o,1);r.key=e+"-"+o,r.hide=r.hide||!1,r.colspan=r.colspan||1,r.rowspan=r.rowspan||1,t.initOpts(r),r.hide=l&&"normal"===r.type&&r.field&&"boolean"==typeof l[r.field]?l[r.field]:r.hide,r.colspan>1&&r.field&&delete r.field,r.field||r.toolbar||r.colspan&&1!==r.colspan||q.indexOf(r.type)!==-1?!r.colGroup||r.colspan>1||(r.colGroup=!1):r.colGroup=!0;var c=e+(parseInt(r.rowspan)||1);if(r.colGroup||c<a.cols.length){var d=0;layui.each(a.cols[c],function(t,i){i.HAS_PARENT||d>=1&&d==(r.colspan||1)||(i.HAS_PARENT=!0,i.parentKey=e+"-"+o,d+=parseInt(i.colspan>1?i.colspan:1),n(c,a.cols[c],t,i))}),r.colGroup="boolean"==typeof r.colGroup?r.colGroup:!(r.field||r.toolbar||q.indexOf(r.type)!==-1),r.isGroup=!0}};layui.each(a.cols,function(e,t){return e>0||void layui.each(t,function(a,i){n(e,t,a,i)})})},W.prototype.renderToolbar=function(){var e=this,i=e.config,l=['<div class="layui-inline" lay-event="add"><i class="layui-icon layui-icon-add-1"></i></div>','<div class="layui-inline" lay-event="update"><i class="layui-icon layui-icon-edit"></i></div>','<div class="layui-inline" lay-event="delete"><i class="layui-icon layui-icon-delete"></i></div>'].join(""),n=e.layTool.find(".layui-table-tool-temp");if("default"===i.toolbar)n.html(l);else if("string"==typeof i.toolbar){var o=t(i.toolbar).html()||"";o&&n.html(a(o).render(i))}var r={filter:{title:"筛选列",layEvent:"LAYTABLE_COLS",icon:"layui-icon-cols"},exports:{title:"导出",layEvent:"LAYTABLE_EXPORT",icon:"layui-icon-export"},print:{title:"打印",layEvent:"LAYTABLE_PRINT",icon:"layui-icon-print"}},c=[];"object"==typeof i.defaultToolbar&&layui.each(i.defaultToolbar,function(e,t){var a="string"==typeof t?r[t]:t;a&&c.push('<div class="layui-inline" title="'+a.title+'" lay-event="'+a.layEvent+'"><i class="layui-icon '+a.icon+'"></i></div>')}),e.layTool.find(".layui-table-tool-self").html(c.join(""))},W.prototype.setParentCol=function(e,t){var a=this,i=a.config,l=a.layHeader.find('th[data-key="'+i.index+"-"+t+'"]'),n=parseInt(l.attr("colspan"))||0;if(l[0]){var o=t.split("-"),r=i.cols[o[0]][o[1]];e?n--:n++,l.attr("colspan",n),l[n<1?"addClass":"removeClass"](y),r.colspan=n,r.hide=n<1;var c=l.data("parentkey");c&&a.setParentCol(e,c)}},W.prototype.setColsPatch=function(){var e=this,t=e.config;layui.each(t.cols,function(t,a){layui.each(a,function(t,a){a.hide&&e.setParentCol(a.hide,a.parentKey)})})},W.prototype.setColsWidth=function(){var e=this,a=e.config,i=0,l=0,n=0,o=0,r=e.setInit("width");e.eachCols(function(e,t){t.hide||i++}),r=r-function(){return"line"===a.skin||"nob"===a.skin?2:i+1}()-e.getScrollWidth(e.layMain[0])-1;var c=function(e){layui.each(a.cols,function(t,i){layui.each(i,function(t,c){var d=0,s=c.minWidth||a.cellMinWidth;return c?void(c.colGroup||c.hide||(e?n&&n<s&&(l--,d=s):(d=c.width||0,/\d+%$/.test(d)?(d=Math.floor(parseFloat(d)/100*r),d<s&&(d=s)):d||(c.width=d=0,l++)),c.hide&&(d=0),o+=d)):void i.splice(t,1)})}),r>o&&l&&(n=(r-o)/l)};c(),c(!0),e.autoColNums=l,e.eachCols(function(t,i){var l=i.minWidth||a.cellMinWidth;i.colGroup||i.hide||(0===i.width?e.getCssRule(a.index+"-"+i.key,function(e){e.style.width=Math.floor(n>=l?n:l)+"px"}):/\d+%$/.test(i.width)&&e.getCssRule(a.index+"-"+i.key,function(e){e.style.width=Math.floor(parseFloat(i.width)/100*r)+"px"}))});var d=e.layMain.width()-e.getScrollWidth(e.layMain[0])-e.layMain.children("table").outerWidth();if(e.autoColNums&&d>=-i&&d<=i){var s=function(t){var a;return t=t||e.layHeader.eq(0).find("thead th:last-child"),a=t.data("field"),!a&&t.prev()[0]?s(t.prev()):t},u=s(),f=u.data("key");e.getCssRule(f,function(t){var a=t.style.width||u.outerWidth();t.style.width=parseFloat(a)+d+"px",e.layMain.height()-e.layMain.prop("clientHeight")>0&&(t.style.width=parseFloat(t.style.width)-1+"px")})}e.loading(!0);var h=e.layMain.find("."+p);if(e.elem[h.length&&e.layHeader.first().find(".layui-table").width()-1>e.layHeader.first().width()?"addClass":"removeClass"]("layui-table-none-overflow"),a.cols.length>1){var y=a.cols.length,v=e.layBox.find(x),m=e.layFixed.find(x+" th"),g=!1;m.each(function(e,a){a=t(a);var i=parseInt(a.attr("rowspan")||"1");i<y&&(a.height(v.find('th[data-key="'+a.attr("data-key")+'"]').height()),g=!0)}),g&&e.layFixed.find(">"+x+' th[rowspan="'+y+'"]').height("auto")}},W.prototype.resize=function(){var e=this;e.fullSize(),e.setColsWidth(),e.scrollPatch()},W.prototype.insReload=function(e){var a=this;e=e||{},delete a.haveInit,e.data&&e.data.constructor===Array&&delete a.config.data,a.config=t.extend(!0,{},a.config,e),a.render()},W.prototype.reload=function(e){var t=this;c.reload(t.config.id,e,!0)},W.prototype.errorView=function(e){var a=this,i=a.layMain.find("."+p),l=t('<div class="'+p+'">'+(e||"Error")+"</div>");i[0]&&(a.layNone.remove(),i.remove()),a.layFixed.addClass(y),a.layMain.find("tbody").html(""),a.layMain.append(a.layNone=l),a.layPage&&a.layPage.addClass(y).find(">div").html(""),a.layTotal&&a.layTotal.addClass(y).find("tbody").html(""),c.cache[a.key]=[]},W.prototype.page=1,W.prototype.pullData=function(e,a){var i=this,l=i.config,n=l.request,o=l.response,r=function(){"object"==typeof l.initSort&&i.sort(l.initSort.field,l.initSort.type)};if(i.startTime=(new Date).getTime(),l.url){var c={};c[n.pageName]=e,c[n.limitName]=l.limit;var d=t.extend(c,l.where);"function"==typeof l.parseRequest&&(d=l.parseRequest(d)||d),l.contentType&&0==l.contentType.indexOf("application/json")&&(d=JSON.stringify(d)),i.loading(),t.ajax({type:l.method||"get",url:l.url,contentType:l.contentType,data:d,dataType:"json",headers:l.headers||{},success:function(t){"function"==typeof l.parseData&&(t=l.parseData(t)||t),t[o.statusName]!=o.statusCode?(i.renderForm(),i.errorView(t[o.msgName]||'返回的数据不符合规范，正确的成功状态码应为："'+o.statusName+'": '+o.statusCode)):(i.renderData(t,e,t[o.countName],!1,a&&(!l.page||l.page.count===t[o.countName])),r(),l.time=(new Date).getTime()-i.startTime+" ms"),a?i.loading(!0):i.setColsWidth(),"function"==typeof l.done&&l.done(t,e,t[o.countName])},error:function(e,t){i.errorView("数据接口请求异常："+t),i.renderForm(),a?i.loading(!0):i.setColsWidth()}})}else if(l.data&&l.data.constructor===Array){var s={},u=e*l.limit-l.limit;s[o.dataName]=l.data.concat().splice(u,l.limit),s[o.countName]=l.data.length,i.renderData(s,e,s[o.countName],!1,a&&(!l.page||l.page.count===l.data.length)),r(),a?i.loading(!0):i.setColsWidth(),"function"==typeof l.done&&l.done(s,e,s[o.countName])}},W.prototype.eachCols=function(e){var t=this;return c.eachCols(t.config.id,e,t.config.cols),t},W.prototype.renderData=function(e,n,o,r,d){var s=this,f=s.config,h=e[f.response.dataName]||[],v=[],m=[],g=[],b=function(){var e;return!r&&s.sortKey?s.sort(s.sortKey.field,s.sortKey.sort,!0):(layui.each(h,function(i,l){var o=[],d=[],h=[],p=i+f.limit*(n-1)+1;0!==l.length&&(r||(l[c.config.indexName]=i),s.eachCols(function(n,r){var s=r.field||n,v=f.index+"-"+r.key,m=l[s];if(void 0!==m&&null!==m||(m=""),!r.colGroup){var g=['<td data-field="'+s+'" data-key="'+v+'" '+function(){var e=[];return r.edit&&e.push('data-edit="'+r.edit+'"'),r.align&&e.push('align="'+r.align+'"'),r.templet&&e.push('data-content="'+m+'"'),r.event&&e.push('lay-event="'+r.event+'"'),r.style&&e.push('style="'+r.style+'"'),r.minWidth&&e.push('data-minwidth="'+r.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return r.hide&&e.push(y),r.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){return"normal"===r.type?v:v+" laytable-cell-"+r.type}()+'">'+function(){var n=t.extend(!0,{LAY_INDEX:p},l),o=c.config.checkName;switch(r.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){return r[o]?(l[o]=r[o],r[o]?"checked":""):n[o]?"checked":""}()+">";case"radio":return n[o]&&(e=i),'<input type="radio" name="layTableRadio_'+f.index+'" '+(n[o]?"checked":"")+' lay-type="layTableRadio">';case"numbers":return p}return r.toolbar?a(t(r.toolbar).html()||"").render(n):u(r,m,n)}(),"</div></td>"].join("");o.push(g),r.fixed&&"right"!==r.fixed&&d.push(g),"right"===r.fixed&&h.push(g)}}),v.push('<tr data-index="'+i+'">'+o.join("")+"</tr>"),m.push('<tr data-index="'+i+'">'+d.join("")+"</tr>"),g.push('<tr data-index="'+i+'">'+h.join("")+"</tr>"))}),d||s.layBody.scrollTop(0),s.layMain.find("."+p).remove(),s.layMain.find("tbody").html(v.join("")),s.layFixLeft.find("tbody").html(m.join("")),s.layFixRight.find("tbody").html(g.join("")),s.renderForm(),"number"==typeof e&&s.setThisRowChecked(e),s.syncCheckAll(),s.haveInit?s.scrollPatch():setTimeout(function(){s.scrollPatch()},50),s.haveInit=!0,l.close(s.tipsIndex),f.HAS_SET_COLS_PATCH||s.setColsPatch(),void(f.HAS_SET_COLS_PATCH=!0))};$(h,f.id,f);var x=c.getTemp(s.key);return s.tempData=x.data,c.cache[s.key]=h,s.layPage[0==o||0===h.length&&1==n?"addClass":"removeClass"](y),0===h.length?(s.renderForm(),s.errorView(f.text.none),J.call(s,!0)):(s.layFixed.removeClass(y),r?(b(),J.call(s)):(b(),d?J.call(s):(s.renderTotal(h),s.layTotal&&s.layTotal.removeClass(y),f.page&&(f.page=t.extend({elem:"layui-table-page"+f.index,count:o,limit:f.limit,limits:f.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(s.page=e.curr,f.limit=e.limit,s.pullData(e.curr))}},f.page),f.page.count=o,i.render(f.page)),void J.call(s,!0))))},W.prototype.renderTotal=function(e){var t=this,a=t.config,i={};if(a.totalRow){layui.each(e,function(e,a){0!==a.length&&t.eachCols(function(e,t){var l=t.field||e,n=a[l];t.totalRow&&(i[l]=(i[l]||0)+(parseFloat(n)||0))})}),t.dataTotal={};var l=[];t.eachCols(function(e,n){var o=n.field||e,r=function(){var e=n.totalRowText||"",t=parseFloat(i[o]).toFixed(2),a={};return a[o]=t,t=u(n,t,a),n.totalRow?t||e:e}(),c=['<td data-field="'+o+'" data-key="'+a.index+"-"+n.key+'" '+function(){var e=[];return n.align&&e.push('align="'+n.align+'"'),n.style&&e.push('style="'+n.style+'"'),n.minWidth&&e.push('data-minwidth="'+n.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return n.hide&&e.push(y),n.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){var e=a.index+"-"+n.key;return"normal"===n.type?e:e+" laytable-cell-"+n.type}()+'">'+r,"</div></td>"].join("");n.field&&(t.dataTotal[o]=r),l.push(c)}),t.layTotal.find("tbody").html("<tr>"+l.join("")+"</tr>")}},W.prototype.getColElem=function(e,t){var a=this,i=a.config;return e.eq(0).find(".laytable-cell-"+(i.index+"-"+t)+":eq(0)")},W.prototype.renderForm=function(e){n.render(e,"LAY-table-"+this.index)},W.prototype.setThisRowChecked=function(e){var t=this,a=(t.config,"layui-table-click"),i=t.layBody.find('tr[data-index="'+e+'"]');i.addClass(a).siblings("tr").removeClass(a)},W.prototype.sort=function(e,a,i,l){var n,r,d=this,s={},u=d.config,h=u.elem.attr("lay-filter"),y=c.cache[d.key];"string"==typeof e&&d.layHeader.find("th").each(function(a,i){var l=t(this),o=l.data("field");if(o===e)return e=l,n=o,!1});try{var n=n||e.data("field"),p=e.data("key");if(d.sortKey&&!i&&n===d.sortKey.field&&a===d.sortKey.sort)return;var v=d.layHeader.find("th .laytable-cell-"+p).find(L);d.layHeader.find("th").find(L).removeAttr("lay-sort"),v.attr("lay-sort",a||null),d.layFixed.find("th")}catch(m){return o.error("Table modules: Did not match to field")}d.sortKey={field:n,sort:a},u.autoSort&&("asc"===a?r=layui.sort(y,n):"desc"===a?r=layui.sort(y,n,!0):(r=layui.sort(y,c.config.indexName),delete d.sortKey)),s[u.response.dataName]=r||y,d.renderData(s,d.page,d.count,!0),l&&layui.event.call(e,f,"sort("+h+")",{field:n,type:a})},W.prototype.loading=function(e){var a=this,i=a.config;i.loading&&(e?(a.layInit&&a.layInit.remove(),delete a.layInit,a.layBox.find(b).remove()):(a.layInit=t(['<div class="layui-table-init">','<i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i>',"</div>"].join("")),a.layBox.append(a.layInit)))},W.prototype.setCheckData=function(e,t){var a=this,i=a.config,l=c.cache[a.key];if(l[e]&&l[e].constructor!==Array&&(l[e][i.checkName]=t,X.check(a.key))){var n=V(i);X.update(a.key,l[e][n],t)}},W.prototype.syncCheckAll=function(){var e=this,t=e.config,a=e.layHeader.find('input[name="layTableCheckbox"]'),i=function(a){return e.eachCols(function(e,i){"checkbox"===i.type&&(i[t.checkName]=a)}),a};a[0]&&(c.checkStatus(e.key).isAll?(a[0].checked||(a.prop("checked",!0),e.renderForm("checkbox")),i(!0)):(a[0].checked&&(a.prop("checked",!1),e.renderForm("checkbox")),i(!1)))},W.prototype.getCssRule=function(e,t){var a=this,i=a.elem.find("style")[0],l=i.sheet||i.styleSheet||{},n=l.cssRules||l.rules;layui.each(n,function(a,i){if(i.selectorText===".laytable-cell-"+e)return t(i),!0})},W.prototype.fullSize=function(){var e,t=this,a=t.config,i=a.height;t.fullHeightGap&&(i=I.height()-t.fullHeightGap,i<135&&(i=135),t.elem.css("height",i)),i&&(e=parseFloat(i)-(t.layHeader.outerHeight()||38),a.toolbar&&(e-=t.layTool.outerHeight()||50),a.totalRow&&(e-=t.layTotal.outerHeight()||40),a.page&&(e-=t.layPage.outerHeight()||41),t.layMain.css("height",e-2))},W.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:(e=document.createElement("div"),e.style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},W.prototype.scrollPatch=function(){var e=this,a=e.layMain.children("table"),i=e.layMain.width()-e.layMain.prop("clientWidth"),l=e.layMain.height()-e.layMain.prop("clientHeight"),n=(e.getScrollWidth(e.layMain[0]),a.outerWidth()-e.layMain.width()),o=function(e){if(i&&l){if(e=e.eq(0),!e.find(".layui-table-patch")[0]){var a=t('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');
a.find("div").css({width:i}),e.find("tr").append(a)}}else e.find(".layui-table-patch").remove()};o(e.layHeader),o(e.layTotal);var r=e.layMain.height(),c=r-l;e.layFixed.find(k).css("height",a.height()>=c?c:"auto"),e.layFixRight[n>0?"removeClass":"addClass"](y),e.layFixRight.css("right",i-1)},W.prototype.events=function(){var e,a=this,i=a.config,o=t("body"),d={},s=a.layHeader.find("th"),h=".layui-table-cell",p=i.elem.attr("lay-filter");a.layTool.on("click","*[lay-event]",function(e){var o=t(this),d=o.attr("lay-event"),s=function(e){var l=t(e.list),n=t('<ul class="layui-table-tool-panel"></ul>');n.html(l),i.height&&n.css("max-height",i.height-(a.layTool.outerHeight()||50)),o.find(".layui-table-tool-panel")[0]||o.append(n),a.renderForm(),n.on("click",function(e){layui.stope(e)}),e.done&&e.done(n,l)};switch(layui.stope(e),O.trigger("table.tool.panel.remove"),l.close(a.tipsIndex),d){case"LAYTABLE_COLS":s({list:function(){var e=[];return a.eachCols(function(t,a){a.field&&"normal"==a.type&&e.push('<li><input type="checkbox" name="'+a.field+'" data-key="'+a.key+'" data-parentkey="'+(a.parentKey||"")+'" lay-skin="primary" '+(a.hide?"":"checked")+' title="'+(a.title||a.field)+'" lay-filter="LAY_TABLE_TOOL_COLS"></li>')}),e.join("")}(),done:function(){n.on("checkbox(LAY_TABLE_TOOL_COLS)",function(e){var l=t(e.elem),n=this.checked,o=l.data("key"),r=l.data("parentkey");layui.each(i.cols,function(e,t){layui.each(t,function(t,l){if(e+"-"+t===o){var c=l.hide;l.hide=!n,a.elem.find('*[data-key="'+i.index+"-"+o+'"]')[n?"removeClass":"addClass"](y),c!=l.hide&&a.setParentCol(!n,r),a.resize()}})}),i.colFilterRecord?te.set(i.id,l.attr("name"),n,i.colFilterRecord):te.clear(i.id)})}});break;case"LAYTABLE_EXPORT":r.ie?l.tips("导出功能不支持 IE，请用 Chrome 等高级浏览器导出",this,{tips:3}):s({list:function(){return['<li data-type="csv">导出到 Csv 文件</li>','<li data-type="xls">导出到 Excel 文件</li>'].join("")}(),done:function(e,l){l.on("click",function(){var e=t(this).data("type");c.exportFile.call(a,i.id,null,e)})}});break;case"LAYTABLE_PRINT":var u=window.open("打印窗口","_blank"),h=["<style>","body{font-size: 12px; color: #666;}","table{width: 100%; border-collapse: collapse; border-spacing: 0;}","th,td{line-height: 20px; padding: 9px 15px; border: 1px solid #ccc; text-align: left; font-size: 12px; color: #666;}","a{color: #666; text-decoration:none;}","*.layui-hide{display: none}","</style>"].join(""),v=t(a.layHeader.html());v.append(a.layMain.find("table").html()),v.append(a.layTotal.find("table").html()),v.find("th.layui-table-patch").remove(),v.find(".layui-table-col-special").remove(),u.document.write(h+v.prop("outerHTML")),u.document.close(),u.print(),u.close()}layui.event.call(this,f,"toolbar("+p+")",t.extend({event:d,config:i},{}))}),s.on("mousemove",function(e){var a=t(this),i=a.offset().left,l=e.clientX-i;a.data("unresize")||d.resizeStart||(d.allowResize=a.width()-l<=10,o.css("cursor",d.allowResize?"col-resize":""))}).on("mouseleave",function(){t(this);d.resizeStart||o.css("cursor","")}).on("mousedown",function(e){var l=t(this);if(d.allowResize){var n=l.data("key");e.preventDefault(),d.resizeStart=!0,d.offset=[e.clientX,e.clientY],a.getCssRule(n,function(e){var t=e.style.width||l.outerWidth();d.rule=e,d.ruleWidth=parseFloat(t),d.minWidth=l.data("minwidth")||i.cellMinWidth})}}),O.on("mousemove",function(t){if(d.resizeStart){if(t.preventDefault(),d.rule){var i=d.ruleWidth+t.clientX-d.offset[0];i<d.minWidth&&(i=d.minWidth),d.rule.style.width=i+"px",l.close(a.tipsIndex)}e=1}}).on("mouseup",function(t){d.resizeStart&&(d={},o.css("cursor",""),a.scrollPatch()),2===e&&(e=null)}),s.on("click",function(i){var l,n=t(this),o=n.find(L),r=o.attr("lay-sort");return o[0]&&1!==e?(l="asc"===r?"desc":"desc"===r?null:"asc",void a.sort(n,l,null,!0)):e=2}).find(L+" .layui-edge ").on("click",function(e){var i=t(this),l=i.index(),n=i.parents("th").eq(0).data("field");layui.stope(e),0===l?a.sort(n,"asc",null,!0):a.sort(n,"desc",null,!0)});var v=function(e){var i=t(this),l=i.parents("tr").eq(0).data("index"),n=a.layBody.find('tr[data-index="'+l+'"]'),o=c.cache[a.key]||[];return o=o[l]||{},t.extend({tr:n,data:c.clearCacheKey(o),del:function(){c.cache[a.key][l]=[],n.remove(),a.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(e,t){if(e in o){var i,l=n.children('td[data-field="'+e+'"]');o[e]=t,a.eachCols(function(t,a){a.field==e&&a.templet&&(i=a.templet)}),l.children(h).html(u({templet:i},t,o)),l.data("content",t)}})}},e)};a.elem.on("click",'input[name="layTableCheckbox"]:not([disabled])+',function(e){var i=t(this).prev(),l=a.layMain.find('input[name="layTableCheckbox"]:not([disabled])'),n=i.parents("tr").eq(0).data("index"),o=i[0].checked,r="layTableAllChoose"===i.attr("lay-filter");r?(l.each(function(e,i){var l=t(i).closest("tr").data("index");a.layBody.find('tr[data-index="'+l+'"] input[name="layTableCheckbox"]').prop("checked",o),a.setCheckData(t(i).closest("tr").data("index"),o)}),a.syncCheckAll(),a.renderForm("checkbox")):(a.setCheckData(n,o),a.syncCheckAll()),layui.event.call(i[0],f,"checkbox("+p+")",v.call(i[0],{checked:o,type:r?"all":"one"})),layui.stope(e)}),a.elem.on("click",'input[lay-type="layTableRadio"]+',function(e){var i=t(this).prev(),l=i[0].checked,n=c.cache[a.key],o=i.parents("tr").eq(0).data("index");layui.each(n,function(e,t){if(o===e){if(t.LAY_CHECKED=!0,X.check(a.key)){var i=V(a.config);X.update(a.key,t[i],!0,!0)}}else delete t.LAY_CHECKED}),a.setThisRowChecked(o),layui.event.call(this,f,"radio("+p+")",v.call(this,{checked:l})),layui.stope(e)}),a.layBody.on("mouseenter","tr",function(){var e=t(this),i=e.index();e.data("off")||a.layBody.find("tr:eq("+i+")").addClass(_)}).on("mouseleave","tr",function(){var e=t(this),i=e.index();e.data("off")||a.layBody.find("tr:eq("+i+")").removeClass(_)}).on("click","tr",function(){m.call(this,"row")}).on("dblclick","tr",function(){m.call(this,"rowDouble")});var m=function(e){var a=t(this);a.data("off")||layui.event.call(this,f,e+"("+p+")",v.call(a.children("td")[0]))};a.layBody.on("change","."+R,function(){var e=t(this),i=this.value,l=e.parent().data("field"),n=e.parents("tr").eq(0).data("index"),o=c.cache[a.key][n];o[l]=i,layui.event.call(this,f,"edit("+p+")",v.call(this,{value:i,field:l}))}).on("blur","."+R,function(){var e,i=t(this),l=this,n=i.parent().data("field"),o=i.parents("tr").eq(0).data("index"),r=c.cache[a.key][o];a.eachCols(function(t,a){a.field==n&&a.templet&&(e=a.templet)}),i.siblings(h).html(function(t){return u({templet:e},t,r)}(l.value)),i.parent().data("content",l.value),i.remove()}),a.layBody.on("click","td",function(e){var a=t(this),i=(a.data("field"),a.data("edit")),l=a.children(h);if(!a.data("off")&&i){var n=t('<input class="layui-input '+R+'">');return n[0].value=a.data("content")||l.text(),a.find("."+R)[0]||a.append(n),n.focus(),void layui.stope(e)}}).on("mouseenter","td",function(){b.call(this)}).on("mouseleave","td",function(){b.call(this,"hide")});var g="layui-table-grid-down",b=function(e){var a=t(this),i=a.children(h);if(!a.data("off"))if(e)a.find(".layui-table-grid-down").remove();else if(i.prop("scrollWidth")>i.outerWidth()){if(i.find("."+g)[0])return;a.append('<div class="'+g+'"><i class="layui-icon layui-icon-down"></i></div>')}};a.layBody.on("click","."+g,function(e){var n=t(this),o=n.parent(),d=o.children(h);a.tipsIndex=l.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(d.height()+16)+"px;"+function(){return"sm"===i.size?"padding: 4px 15px; font-size: 12px;":"lg"===i.size?"padding: 14px 15px;":""}()+'">',d.html(),"</div>",'<i class="layui-icon layui-table-tips-c layui-icon-close"></i>'].join(""),d[0],{tips:[3,""],time:-1,anim:-1,maxWidth:r.ios||r.android?300:a.elem.width()/2,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){l.close(t)})}}),c._tableTdCurr=t(this).closest("td"),layui.stope(e)}),a.layBody.on("click","*[lay-event]",function(e){var i=t(this),l=i.parents("tr").eq(0).data("index");layui.event.call(this,f,"tool("+p+")",v.call(this,{event:i.attr("lay-event")})),a.setThisRowChecked(l),layui.stope(e)}),a.layMain.on("scroll",function(){var e=t(this),i=e.scrollLeft(),n=e.scrollTop();a.layHeader.scrollLeft(i),a.layTotal.scrollLeft(i),a.layFixed.find(k+":not(:hover)").scrollTop(n),l.close(a.tipsIndex)}),a.layFixed.find(k).on("scroll",function(){var e=t(this);e.is(":hover")&&(a.layFixed.find(k+":not(:hover)").scrollTop(e.scrollTop()),a.layMain.scrollTop(e.scrollTop()))}),le.timer[i.id]&&le.reset(i.id)},function(){I.on("resize",function(){c.resize()}),O.on("click",function(){O.trigger("table.remove.tool.panel")}),O.on("table.remove.tool.panel",function(){t(".layui-table-tool-panel").remove()})}(),c.init=function(e,a){a=a||{};var i=this,l=t(e?'table[lay-filter="'+e+'"]':h+"[lay-data]"),n="Table element property lay-data configuration item has a syntax error: ";return l.each(function(){var i=t(this),l=i.attr("lay-data");try{l=new Function("return "+l)()}catch(r){o.error(n+l)}var d=[],s=t.extend({elem:this,cols:[],data:[],skin:i.attr("lay-skin"),size:i.attr("lay-size"),even:"string"==typeof i.attr("lay-even")},c.config,a,l);e&&i.hide(),i.find("thead>tr").each(function(e){s.cols[e]=[],t(this).children().each(function(a){var i=t(this),l=i.attr("lay-data");try{l=new Function("return "+l)()}catch(r){return o.error(n+l)}var c=t.extend({title:i.text(),colspan:i.attr("colspan")||0,rowspan:i.attr("rowspan")||0},l);c.colspan<2&&d.push(c),s.cols[e].push(c)})}),i.find("tbody>tr").each(function(e){var a=t(this),i={};a.children("td").each(function(e,a){var l=t(this),n=l.data("field");if(n)return i[n]=l.html()}),layui.each(d,function(e,t){var l=a.children("td").eq(e);i[t.field]=l.html()}),s.data[e]=i}),c.render(s)}),i},d.that={},d.config={},d.cols={};var ne=function(e,t,a,i){if(i.isGroup){var l=0;e++,i.CHILD_COLS=[];var n=a+(parseInt(i.rowspan)||1);layui.each(t[n],function(a,o){o.PARENT_COL_INDEX||l>=1&&l==(i.colspan||1)||(o.PARENT_COL_INDEX=e,i.CHILD_COLS.push(o),l+=parseInt(o.colspan>1?o.colspan:1),ne(e,t,n,o))})}};c.eachCols=function(e,a,i){var l,n=d.config[e]||{},o=n.cols?d.cols[e]||[]:[],r=0;i=t.extend(!0,[],i||n.cols),o.length?l=!0:layui.each(i,function(t,a){return t>0||(layui.each(a,function(e,a){ne(r,i,t,a),a.PARENT_COL_INDEX||o.push(a)}),void(d.cols[e]=o))});var s=function(e){layui.each(e||o,function(e,t){var n=t.key.split("-");if(l&&(t.hide=i[n[0]][n[1]].hide,t[c.config.checkName]=!1,t.width=t.width||0),t.colGroup||"function"==typeof a&&a(e,t),t.CHILD_COLS)return s(t.CHILD_COLS)})};s()},c.checkStatus=function(e,a){var i=0,l=0,n=[],o=c.cache[e]||[];layui.each(o,function(e,t){return t.constructor===Array?void l++:void(t[c.config.checkName]&&(i++,n.push(c.clearCacheKey(t))))});var r={data:n,isAll:!!o.length&&i===o.length-l},d=G(e);if(d&&d.checkStatus&&(r.status=X.get(e),a)){r.dataCache=[];var s=Q[d.id];layui.each(t.extend(!0,[],X.getChecked(e)),function(e,t){s[t]&&r.dataCache.push(c.clearCacheKey(s[t]))})}if(d&&d.checkDisabled){var u=d.checkDisabled;if("object"==typeof u&&u.enabled!==!1){var f=0,h=0,y=V(d),p=X.get(e,M);layui.each(c.cache[e],function(e,t){var a=t[y];p.indexOf(a)===-1&&(f++,t[c.config.checkName]&&h++)}),r.isAll=h>0&&f===h}}return r},c.exportFile=function(e,t,a){var i=this;t=t||c.clearCacheKey(c.cache[e]),a=a||"csv";var l=d.config[e]||{},n={csv:"text/csv",xls:"application/vnd.ms-excel"}[a],s=document.createElement("a");return r.ie?o.error("IE_NOT_SUPPORT_EXPORTS"):(s.href="data:"+n+";charset=utf-8,\ufeff"+encodeURIComponent(function(){var a=[],l=[],n=[];return layui.each(t,function(t,i){var n=[];"object"==typeof e?(layui.each(e,function(e,i){0==t&&a.push(i||"")}),layui.each(c.clearCacheKey(i),function(e,t){n.push('"'+(t||"")+'"')})):c.eachCols(e,function(e,l){if(l.field&&"normal"==l.type&&!l.hide){var o=i[l.field];void 0!==o&&null!==o||(o=""),0==t&&a.push(l.title||""),n.push('"'+u(l,o,i,"text")+'"')}}),l.push(n.join(","))}),layui.each(i.dataTotal,function(e,t){n.push(t)}),a.join(",")+"\r\n"+l.join("\r\n")+"\r\n"+n.join(",")}()),s.download=(l.title||"table_"+(l.index||""))+"."+a,document.body.appendChild(s),s.click(),void document.body.removeChild(s))},c.resize=function(e){if(e){var t=s(e);if(!t)return;d.that[e].resize()}else layui.each(d.that,function(){this.resize()})},c.reload=function(e,a,i){var l=s(e);if(l){var n=d.that[e],o=t.extend(!0,{},G(e),a);o.checkStatus||X.reset(e);var r=!1;if(!!o.page!=!!l.page&&(r=!0),!r){var c=ae.getParamsBlacklist();layui.each(a,function(e,t){var a=c.indexOf(e);if(a!==-1)return r=!0,!1})}if(r){if(!i)return n.reload(a),z[e]=d.call(n);n.insReload(a),z[e].config=n.config}else if("object"==typeof a.page&&(a.page.curr&&(n.page=a.page.curr),delete a.elem,delete a.jump),a.data&&a.data.constructor===Array&&delete n.config.data,i?t.extend(n.config,a):t.extend(!0,n.config,a),n.config.page||(n.page=1),n.loading(),n.pullData(n.page),!i)return d.call(n)}},c.render=function(e){var t=new W(e);return d.call(t)},c.clearCacheKey=function(e){return e=t.extend({},e),delete e[c.config.checkName],delete e[c.config.indexName],e},c.init(),e(f,c)});