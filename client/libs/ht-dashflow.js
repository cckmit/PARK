!function(f){"use strict";var J="ht",M=f[J],e=M.Default,U=Math,g=(U.PI,U.sin,U.cos,U.atan2,U.sqrt,U.max),b=U.floor,i=(U.round,U.ceil),z=M.Shape,j=(M.Edge,M.List),r=M.Style,p=M.graph,q=e.getInternal(),A=q.ui(),c=null,D="prototype",X=f.clearInterval,x=f.setInterval,W=function(C){var q=C.data,X=this.dm();if(q&&"add"===C.kind){var _=X.$1c,R=q instanceof z?"shape.":"edge.";_&&q.s(R+"dash.flow")&&_.indexOf(q)<0&&_.push(q)}"clear"===C.kind&&(X.$1c=[])},n=function(m){var w=m.property,R=m.data,U=m.newValue,M=this.dm().$1c,A=R instanceof z?"s:shape.dash.flow":"s:edge.dash.flow";if(M&&w===A)if(U)M.indexOf(R)<0&&M.push(R);else for(var X=M.length,i=0;X>i;i++)if(M[i]===R){M.splice(i,1);break}},K=p.GraphView[D],Q=A.EdgeUI[D],a=A.ShapeUI[D],N=a._80o,S=Q._80o,G=M.DataModel[D],P=G.prepareRemove,u=K.setDataModel;r["edge.dash.flow.step"]==c&&(r["edge.dash.flow.step"]=3),r["shape.dash.flow.step"]==c&&(r["shape.dash.flow.step"]=3),G.prepareRemove=function(L){P.call(this,L);var Z=L._dataModel,l=Z.$1c;if(l)for(var a=l.length,M=0;a>M;M++)if(l[M]===L){l.splice(M,1);break}},K.setDataModel=function(T){var c=this,J=c._dataModel;if(J!==T){J&&(J.umm(W,c),J.umd(n,c),J.$1c=[]),T.mm(W,c),T.md(n,c);var q=T.$1c=[];T.each(function(F){var x=F instanceof z?"shape.":"edge.";F.s(x+"dash.flow")&&q.indexOf(F)<0&&q.push(F)}),u.call(c,T)}},K.setDashFlowInterval=function(m){var p=this,M=p.$2c;p.$2c=m,p.fp("dashFlowInterval",M,m),p.$3c!=c&&(X(p.$3c),delete p.$3c,p.enableDashFlow(m))},K.getDashFlowInterval=function(){return this.$2c},K.$4c=function(){var X,N,z,H=this,c=H.tx(),h=H.ty(),u=H._zoom,x=H.getWidth(),P=H.getHeight(),$={x:-c/u,y:-h/u,width:x/u,height:P/u},T=H.dm().$1c,l=H._56I,J=new j;if(T.forEach(function(R){l[R.getId()]&&(X=H.getDataUI(R),X&&(z=X._79o(),z&&J.add(z)))}),0!==J.size()&&(J.each(function(X){e.intersectsRect($,X)&&(N=e.unionRect(N,X))}),N&&(N&&(e.grow(N,g(1,1/u)),N.x=b(N.x*u)/u,N.y=b(N.y*u)/u,N.width=i(N.width*u)/u,N.height=i(N.height*u)/u,N=e.intersection($,N)),N))){var t=H._canvas.getContext("2d");t.save(),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin;var R=e.devicePixelRatio,n=N.x,p=N.y,f=N.width,r=N.height;n=Math.floor((n*u+c)*R),p=Math.floor((p*u+h)*R),f=Math.ceil(f*u*R)+1,r=Math.ceil(r*u*R)+1,N.x=(n/R-c)/u,N.y=(p/R-h)/u,N.width=f/R/u,N.height=r/R/u,t.beginPath(),t.rect(n,p,f,r),t.clip(),t.clearRect(n,p,f,r),q.translateAndScale(t,c,h,u),H.$5c(t,N),t.restore()}},K.$5c=function(Q,n){var $,h,J=this;J._93db(Q),J.each(function(w){J._56I[w._id]&&($=J.getDataUI(w),$&&(h=$._79o(),(!n||e.intersectsRect(n,h))&&($.$7c=!0,$._42(Q),delete $.$7c)))}),J._92db(Q)},K.enableDashFlow=function(r){var N=this;N.$3c==c&&(N.$3c=x(function(){N.$4c()},r||N.$2c||50))},K.disableDashFlow=function(){var A=this;X(A.$3c),delete A.$3c};var T=function(){var n=this,r=n._data,Q=r instanceof z?"shape.":"edge.",F=r.s(Q+"dash.pattern"),q=r.s(Q+"dash.flow.reverse");if(F&&r.s(Q+"dash")&&r.s(Q+"dash.flow")&&n.$7c){var l=n.s(Q+"dash.offset")||0,h=r.s(Q+"dash.flow.step"),N=r.getStyleMap(),H=0;F.forEach(function(p){H+=p}),q&&(h=-h),l-=h,l%=H,N||(r._styleMap=N={}),N[Q+"dash.offset"]=l}};Q._80o=function(M){S.call(this,M),T.call(this)},a._80o=function(z){N.call(this,z),T.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);