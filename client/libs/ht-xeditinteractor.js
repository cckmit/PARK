!function(W,g,j){"use strict";var U="ht",c=W[U],Y=c.Default,D=c.graph,n=Y.getInternal(),E=n.ui(),q=E.NodeUI.prototype,z=E.ShapeUI.prototype,v=D.GraphView,J=v.prototype,X=E.EdgeUI.prototype,k=c.Node,Z=c.Shape,y=c.Edge,o=c.Group,u=Y.isTouchable,p=Y.preventDefault,L=W.setTimeout,d=Y.grow,C=Y.isDragging,P=Y.getDistance,A=null,i=c.List,m="undefined"!=typeof Float32Array?Float32Array:Array,h=Math,M=h.PI,B="Crossing",Q="No Crossing",f=M/2,$=2*M,e=h.atan2,s=h.sqrt,l=h.pow,G=h.sin,R=h.cos,r=h.min,F=h.max,K=h.abs,O=h.ceil,w=h.round,N=Y.unionPoint,b=Y.unionRect,t=Y.containsPoint,I=Y.clone,T="rgb(52, 152, 219)",V="red",S={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},x={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var g=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],E=0;E<g.length;E++){var F=g[E];F=0===E%2?F/400*x.width:F/100*x.height,g[E]=F}return x.width>120&&(g[4]=x.width-26,g[6]=x.width-40,g[10]=x.width-40,g[12]=x.width-26,g[18]=33),g}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},H={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:T,rotation:.61},{type:"circle",rect:[200,120,70,70],background:T,rotation:.61},{type:"circle",rect:[200,220,70,70],background:T,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:T},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:T}]},_={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:V,rotation:.61}]},a={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:T},{type:"circle",rect:[0,210,90,90],background:T},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:T}]},zo={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:V},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:V}]},Jh={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:T}]},ae={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:V}]},nk={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},Zm={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Nh=function(N){var i=N.touches[0];return i?i:N.changedTouches[0]},Do=function(r,S,n,q){return e(q-S,n-r)},nf=function(n,E){return{x:n.x*E,y:n.y*E}},zd=function(O,i){O.each(function(F){return O.isSelected(F)?i(F):void 0})},yp=function(g,$){g.reverseEach(function(y){return g.isSelected(y)?$(y):void 0})},Ue=function(s,x,m){var n,A,Q,L,N,z=this,$=x,w=z.gv;if(s instanceof Z){Q=s.getSegments();var U=w.getDataUI(s);N=U._55O.$15l,Q&&Q.size()||(Q=xc(N)),s.isClosePath()&&Q.indexOf(5)<0&&(Q=new i(Q._as),Q.add(5)),n=Rl(s,U,$),A=N[n]}else{var C=w.getDataUI(s);N=Pd(C,s.s("edge.points")),Q=s.s("edge.segments"),Q&&Q.size()||(Q=xc(N)),N=N._as,n=Rl(s,C,$),A=N[n]}if(Q&&(L=Q.get($)),2===L||1===L||5===L){var g=N[n+1];5===L&&(g=N[0]);var G=Yd(A,m,g);return G}return m},il=function(J,t,F,f){var S=t/2,H=F/2,u=_e(J,-S,-H,f),O=_e(J,S,-H,f),x=_e(J,-S,H,f),Q=_e(J,S,H,f),j=_e(J,0,-H,f),q=_e(J,S,0,f),I=_e(J,0,H,f),G=_e(J,-S,0,f);return[u,O,x,Q,j,q,I,G]},Yd=function(L,b,y){var O={x:b.x-L.x,y:b.y-L.y},H={x:y.x-L.x,y:y.y-L.y},D=s(l(y.x-L.x,2)+l(y.y-L.y,2)),$={x:H.x/D,y:H.y/D},M=O.x*$.x+O.y*$.y,z={x:$.x*M,y:$.y*M};return{x:L.x+z.x,y:L.y+z.y}},_e=function(e,f,u,P){var X=R(P)*f-G(P)*u,k=G(P)*f+R(P)*u;return e?{x:e.x+X,y:e.y+k}:{x:X,y:k}},wh=function(c,k){return k>2*c?c:k/2},Jm=function(Y,H,J,m){var O=P(Y,H);return J=m?r(J,O):wh(J,O),O?J/=O:J=0,{x:Y.x+(H.x-Y.x)*J,y:Y.y+(H.y-Y.y)*J}},ts=function(v,N){var J,W,x=v.gv,m=v._data,R=m._40I,B=m._41I,p=m.s("edge.offset"),o=m.s("edge.source.position"),d=m.s("edge.target.position"),b=m.s("edge.source.offset.x"),X=m.s("edge.source.offset.y"),Q=m.s("edge.target.offset.x"),S=m.s("edge.target.offset.y"),k=m.s("edge.source.anchor.x"),q=m.s("edge.source.anchor.y"),c=m.s("edge.target.anchor.x"),w=m.s("edge.target.anchor.y");if(N?(J=n.getEdgeAgentPosition(x,R,o,b,X,k,q),W=n.getEdgeAgentPosition(x,B,d,Q,S,c,w)):(J=n.getEdgeAgentPosition(x,R,o,0,0,k,q),W=n.getEdgeAgentPosition(x,B,d,0,0,c,w)),"points"===m.s("edge.type")&&p&&!m.s("edge.center")&&J){var h=m.s("edge.points")||new i,T=h.size(),O=Jm(J,T?h.get(0):W,p,T),G=Jm(W,T?h.get(T-1):J,p,T);J=O,W=G}return[J,W]},Pd=function(s,Y,p){var m=s._78o,x=s._data,U=x.s("edge.type"),u=[m.sourcePoint,m.targetPoint];return"points"===U?p&&(u=ts(s)):u=m.center?U?p?ts(s):ts(s,!0):p?ts(s):[m.c1,m.c2]:p?ts(s):ts(s,!0),Y=new i(Y?Y._as:A),Y.add(u[0],0),Y.add(u[1]),Y},js=function(E){return E=new i(E._as),E.removeAt(0),E.removeAt(E.size()-1),E},xc=function(t){t._as||(t=new i(t));var O=new i;O.add(1);for(var Y=1;Y<t.size();Y++)O.add(2);return O},_f=function(d,m){return{x:(d.x+m.x)/2,y:(d.y+m.y)/2}},Ch=function(O,S){return{x:O.x+1*(S.x-O.x)/4,y:O.y+1*(S.y-O.y)/4}},Zb=function(w,H){return{x:w.x+3*(H.x-w.x)/4,y:w.y+3*(H.y-w.y)/4}},tl=function(f,h,x,H){var J=h.x+h.width/2,S=h.y+h.height/2,c=s(J*J+S*S),Z=e(S,J)+x;return{x:H.x+c*R(Z),y:H.y+c*G(Z)}},Hl=J.validateImpl,vk=J.isRectEditable,Pk=J.isPointEditable,Er=J._42,Cl=z._79o,_p=X._79o,Xq=z._48O,Xb=z._47O,Vq=q._48O,qi=q._80o,qf=z._80o,sn=q.getSelectWidth,cp=q._47O,tc=X._47O,Ib=J.isEditable,Jb=["northwest","north","northeast","east","southeast","south","southwest","west"],Ak=function(z,H,o,h,V,E,l,R,i,X){var q=z.x,U=z.y,u=z.width,K=z.height,m={x:q+u/2,y:U+K/2};h=h||0,H=_e(m,H.x-m.x,H.y-m.y,-h),l&&!R&&(H.x+=i,H.y+=X);var e=.01;if("northwest"===o?(H.x+V>q+u-e&&(H.x=q+u-V-e),H.y+V>U+K-e&&(H.y=U+K-V-e),z=N(H,{x:q+u,y:U+K})):"north"===o?(H.y+V>U+K-e&&(H.y=U+K-V-e),z=N({x:q,y:H.y},{x:q+u,y:U+K})):"northeast"===o?(H.x<q+V+e&&(H.x=q+V+e),H.y+V>U+K-e&&(H.y=U+K-V-e),z=N({x:q,y:H.y},{x:H.x,y:U+K})):"west"===o?(H.x+V>q+u-e&&(H.x=q+u-V-e),z=N({x:H.x,y:U},{x:q+u,y:U+K})):"east"===o?(H.x<q+V+e&&(H.x=q+V+e),z=N({x:q,y:U},{x:H.x,y:U+K})):"southwest"===o?(H.x+V>q+u-e&&(H.x=q+u-V-e),H.y<U+V+e&&(H.y=U+V+e),z=N({x:H.x,y:U},{x:q+u,y:H.y})):"south"===o?(H.y<U+V+e&&(H.y=U+V+e),z=N({x:q,y:U},{x:q+u,y:H.y})):"southeast"===o&&(H.x<q+V+e&&(H.x=q+V+e),H.y<U+V+e&&(H.y=U+V+e),z=N({x:q,y:U},H)),"keepRatio"===E&&(!l&&R||l&&!R)&&("northeast"===o||"southeast"===o||"northwest"===o||"southwest"===o)){var s=z.width,t=z.height,y=s/u,n=t/K,b=r(y,n);z.width=u*b,z.height=K*b,"northeast"===o?z.y=U+(K-z.height):"northwest"===o?(z.y=U+(K-z.height),z.x=q+(u-z.width)):"southwest"===o&&(z.x=q+(u-z.width))}z.x-=m.x,z.y-=m.y;var c=tl(A,z,h,m);return z.x=c.x-z.width/2,z.y=c.y-z.height/2,z},Sh=function(m,k,A,O){var l=m.getRotation(),I=k,v=I.x,c=I.y,H=I.width,_=I.height,C={x:v+I.width/2,y:c+I.height/2};O=_e(C,O.x-C.x,O.y-C.y,-l),"northwest"===A?I=N(O,{x:v+H,y:c+_}):"north"===A?I=N({x:v,y:O.y},{x:v+H,y:c+_}):"northeast"===A?I=N({x:v,y:O.y},{x:O.x,y:c+_}):"west"===A?I=N({x:O.x,y:c},{x:v+H,y:c+_}):"east"===A?I=N({x:v,y:c},{x:O.x,y:c+_}):"southwest"===A?I=N({x:O.x,y:c},{x:v+H,y:O.y}):"south"===A?I=N({x:v,y:c},{x:v+H,y:O.y}):"southeast"===A&&(I=N({x:v,y:c},O)),m.setRect(I),I.x-=C.x,I.y-=C.y;var o=tl(m,I,l,C);m.p(o.x,o.y)},xj=function(Q,F,g,D,z,T,Z,B){var O=A;T?(O=_e(A,z.x-F.x,z.y-F.y,-g),O.x-=Z.x,O.y-=Z.y):O=_e(A,z.x-F.x,z.y-F.y,0);var f={x:F.x+O.x,y:F.y+O.y};B&&(f=B(f.x,f.y)),f.e=Q.getPoints().get(D).e,Q.setPoint(D,f);var s=Q.getWidth(),Y=Q.getHeight(),t=Q.p().x-s/2,I=Q.p().y-Y/2;t-=F.x,I-=F.y;var C=tl(Q,{x:t,y:I,width:s,height:Y},g,F);Q.p(C.x,C.y)},Rl=function(D,j,K){var h,E;if(D instanceof Z?(h=D.getPoints(),E=D.getSegments()):D instanceof y&&"points"===D.s("edge.type")&&(h=D.s("edge.points"),E=D.s("edge.segments"),h=Pd(j,h)),E&&E.size()||(E=xc(h)),D instanceof Z&&D.isClosePath()&&E.indexOf(5)<0&&(E=new i(E._as),E.add(5)),E)for(var a=-1,C=0;C<E.size();C++){if(C===K)return a;var v=E.get(C);1===v?a+=1:2===v?a+=1:3===v?a+=2:4===v&&(a+=3)}},Ad=function(R,q,o){var J,u;if(R instanceof Z?(J=R.getPoints(),u=R.getSegments()):R instanceof y&&"points"===R.s("edge.type")&&(J=R.s("edge.points"),u=R.s("edge.segments"),J=Pd(q,J)),u&&u.size()||(u=xc(J)),u)for(var i=-1,N=0;N<u.size();N++){var c=u.get(N);if(1===c?i+=1:2===c?i+=1:3===c?i+=2:4===c&&(i+=3),i===o)return N}},Fq=function(j,I){var v=[j[0]-I[0],j[1]-I[1],j[2]-I[2]];return v},Yq=function(){var E=new m(16);return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},Sp=function(v,p){var W=v[0],Q=v[1],T=v[2];return v[0]=p[0]*W+p[4]*Q+p[8]*T+p[12],v[1]=p[1]*W+p[5]*Q+p[9]*T+p[13],v[2]=p[2]*W+p[6]*Q+p[10]*T+p[14],v},fm=function(k,m){if(m){var y=G(m),i=R(m),A=k[0],e=k[1],p=k[2],Q=k[3],Y=k[8],c=k[9],o=k[10],V=k[11];k[0]=A*i-Y*y,k[1]=e*i-c*y,k[2]=p*i-o*y,k[3]=Q*i-V*y,k[8]=A*y+Y*i,k[9]=e*y+c*i,k[10]=p*y+o*i,k[11]=Q*y+V*i}},yq=function(R,C){for(var X=R.s("grid.row.count"),J=R.s("grid.column.count"),o=0;X>o;o++)for(var p=0;J>p;p++){var O=R.getCellRect(o,p);if(t(O,C))return{rowIndex:o,columnIndex:p,rect:O,grid:R}}return null},Dj=function(q,i,J,o,P,L){var j={},l=J-q,R=o-i,v=h.sqrt(l*l+R*R),H=l/v,f=R/v,u=(-q+P)*H+(-i+L)*f;return 0>=u?(j.x=q,j.y=i):u>=v?(j.x=J,j.y=o):(j.x=q+u*H,j.y=i+u*f),l=P-j.x,R=L-j.y,j.z=h.sqrt(l*l+R*R),j},pe=function(F,W){var m,X,d,k,U,V,x,u,a=F.getPoints(),I=F.getSegments(),O=F.p(),f=F.getRotation();if(!I||!(I.indexOf(3)>0||I.indexOf(4)>0)){for(u=0;u<=a.size()-1;u++)if(u===a.size()-1?(U=a.get(0),k=a.get(u)):(k=a.get(u),U=a.get(u+1)),k=_e(O,k.x-O.x,k.y-O.y,f),U=_e(O,U.x-O.x,U.y-O.y,f),V=Dj(k.x,k.y,U.x,U.y,W.x,W.y),x=V.z,x<(F.s("shape.border.width")||10)){X=k,d=U,m=u;break}if(m!=A){var i=Dj(X.x,X.y,d.x,d.y,W.x,W.y),c=P(X,i);return{attachIndex:m,attachOffset:c}}}},pg=function(E){for(var R=E._data,V=R.p(),J=R.getRotation(),N=R.getPoints(),d=A,l=[],X=0;X<N.size();X++)d=N.get(X),l.push(_e(V,d.x-V.x,d.y-V.y,J));E._55O.$15l=l};Y.setImage("xeditinteractor_parentIcon",H),Y.setImage("xeditinteractor_hostIcon",_),Y.setImage("xeditinteractor_edgeIcon",a),Y.setImage("xeditinteractor_removeIcon",zo),Y.setImage("xeditinteractor_sourceIcon",Jh),Y.setImage("xeditinteractor_targetIcon",ae),Y.setImage("xeditinteractor_elevationIcon",nk),Y.setImage("xeditinteractor_tallIcon",Zm),J._editPointSize=u?24:9,J._edgeHelpers=["parent","remove","source","target"],J._leftTopHelpers=["parent"],J._rightTopHelpers=["host"],J._leftBottomHelpers=["edge"],J._rightBottomHelpers=["remove"],Jb=Jb.concat(Jb).concat(Jb),X._79o=function(){var t=this,c=t.gv,F=c.getZoom(),Z=c._editInteractor,E=_p.call(t);if(!E)return null;var _=ts(t,!0),W=_[0],O=_[1],o={x:E.x,y:E.y,width:E.width,height:E.height},$=N(W,O);if(Z instanceof D.XEditInteractor){o=b(o,$);var i=t._55O,T=c.getEditPointSize()/F+2,Q=0;i&&i._43O&&(Q+=T/2,d(o,Q))}return o},X._47O=function(L){var l=this,c=l.gv,Z=c._editInteractor;Z instanceof D.XEditInteractor||tc.call(l,L)},X.rectIntersects=function(E){var P=this,a=P._data,C=P.gv,S=C.getZoom(),$=P._55O,y=C._editInteractor;if(y instanceof D.XEditInteractor&&C.isEditable(a)&&$&&$._43O&&"points"===a.s("edge.type")){var X=a.s("edge.points"),m=a.s("edge.segments");X=Pd(P,X),m&&m.size()||(m=xc(X)),X=X._as;var g=!1,H=u?5:1,q=E.x+H,f=E.y+H,J={x:q,y:f};if(y._edge===a&&y._hoverSegmentIndex>=0){var K=C._editInteractor._hoverSegmentIndex,V=m.get(K),r=Rl(a,P,K),z=A;if(r!=A&&r>=0){var x=X[r],G=C.getSegmentHoverWidth()/S;if(2===V||1===V){var b=X[r+1];z=wj(new kq(x.x,x.y),new kq(b.x,b.y),new kq(J.x-G,J.y-G),new kq(J.x+2*G,J.y+2*G)),z.$62l===B&&(g=!0)}else if(3===V){var W=X[r+1],b=X[r+2];z=up(new kq(x.x,x.y),new kq(W.x,W.y),new kq(b.x,b.y),new kq(J.x-G,J.y-G),new kq(J.x+2*G,J.y+2*G)),z.$62l===B&&(g=!0)}else if(4===V){var v=X[r+1],Q=X[r+2];b=X[r+3],z=nr(new kq(x.x,x.y),new kq(v.x,v.y),new kq(Q.x,Q.y),new kq(b.x,b.y),new kq(J.x-G,J.y-G),new kq(J.x+2*G,J.y+2*G)),z.$62l===B&&(g=!0)}}}if(g)return!0}return A},z._47O=function(S){var k=this,p=k.gv,W=p._editInteractor;W instanceof D.XEditInteractor||Xb.call(k,S)},z.rectIntersects=function(n){var I=this,q=I._data,K=I.gv,f=K.getZoom(),$=I._55O,V=K._editInteractor;if(V instanceof D.XEditInteractor&&K.isEditable(q)&&$&&$._43O){var N=$.$15l,W=!1,k=u?5:1,y=n.x+k,E=n.y+k,O={x:y,y:E};if(N&&N.length===q.getPoints().size()||(pg(I),N=$.$15l),V._shape===q&&V._hoverSegmentIndex>=0){var g=q.getSegments();g&&g.size()||(g=xc(N));var s=K._editInteractor._hoverSegmentIndex,i=g.get(s),J=Rl(q,I,s),t=A;if(J!=A&&J>=0){var Q=N[J],H=K.getSegmentHoverWidth()/f;if(2===i||1===i){var w=N[J+1];t=wj(new kq(Q.x,Q.y),new kq(w.x,w.y),new kq(O.x-H,O.y-H),new kq(O.x+2*H,O.y+2*H)),t.$62l===B&&(W=!0)}else if(3===i){var M=N[J+1],w=N[J+2];t=up(new kq(Q.x,Q.y),new kq(M.x,M.y),new kq(w.x,w.y),new kq(O.x-H,O.y-H),new kq(O.x+2*H,O.y+2*H)),t.$62l===B&&(W=!0)}else if(4===i){var a=N[J+1],r=N[J+2];w=N[J+3],t=nr(new kq(Q.x,Q.y),new kq(a.x,a.y),new kq(r.x,r.y),new kq(w.x,w.y),new kq(O.x-H,O.y-H),new kq(O.x+2*H,O.y+2*H)),t.$62l===B&&(W=!0)}}}if(W)return!0}return A},z._48O=function(){var h=this,m=h.gv,M=m._editInteractor;M instanceof D.XEditInteractor?(q._48O.call(h),h._55O._43O&&pg(h)):Xq.call(h)},z._79o=function(){var i=this,y=i.gv,v=y.getZoom(),G=y._editInteractor,c=Cl.call(i);if(c){var o={x:c.x,y:c.y,width:c.width,height:c.height};if(G instanceof D.XEditInteractor){var T=i._55O,g=y.getEditPointSize()/v+2,z=0;T&&T._43O&&(z+=g/2,d(o,z))}return o}},q._47O=function(n){var x=this,C=x.gv,h=C._editInteractor;if(h instanceof D.XEditInteractor);else{var H=x._55O;H&&H._98o&&cp.call(x,n)}},q.getSelectWidth=function(){var y=this,$=y.gv,K=$._editInteractor,J=y._data;return $.isEditable(J)&&K instanceof D.XEditInteractor?0:sn.call(y)},q._80o=function(r){var i=this,$=i.gv._editInteractor;if(qi.call(i,r),$&&$._debug){r.save(),r.beginPath(),r.lineWidth=1,r.strokeStyle="green";var c=i._79o();c&&(r.rect(c.x,c.y,c.width,c.height),r.stroke()),r.restore()}},z._80o=function(Q){var t=this,l=t.gv._editInteractor;if(qf.call(t,Q),l&&l._debug){Q.save(),Q.beginPath(),Q.lineWidth=1,Q.strokeStyle="green";var D=t._79o();Q.rect(D.x,D.y,D.width,D.height),Q.stroke(),Q.restore()}},q._48O=function(){var c=this,Y=c.gv,b=c._data,z=Y._editInteractor,P=c._55O,L=b.p(),K=b.getRotation();if(z instanceof D.XEditInteractor){if(P._42O){var C=il(L,b.getWidth(),b.getHeight(),K),w=C[0],d=C[1],O=C[2],m=C[3],i=C[4],I=C[5],J=C[6],B=C[7];P.$45l=[w,i,d,I,m,J,O,B]}}else Vq.call(c)},J.getResizeMode=function(){return this.$25l||"normal"},J.setResizeMode=function(t){var f=this.$25l;this.$25l=t,this.fp("resizeMode",f,t)},J.getSnapAngle=function(){return this.$26l||Math.PI/36},J.setSnapAngle=function(R){var w=this.$26l;this.$26l=R,this.fp("snapAngle",w,R)},J.getSnapSpacing=function(){return this.$27l},J.setSnapSpacing=function(M){var P=this.$27l;this.$27l=M,this.fp("snapSpacing",P,M)},J.getPointSnapSpacing=function(){return this._pointSnapSpacing},J.setPointSnapSpacing=function(P){var E=this._pointSnapSpacing;this._pointSnapSpacing=P,this.fp("pointSnapSpacing",E,P)},J.setHelperEditableFunc=function(Y){var l=this._helperEditableFunc;this._helperEditableFunc=Y,this.fp("helperEditableFunc",l,Y)},J.getHelperEditableFunc=function(){return this._helperEditableFunc},J.setLeftTopHelpers=function(v){var O=this._leftTopHelpers;this._leftTopHelpers=v,this.fp("leftTopHelpers",O,v)},J.getLeftTopHelpers=function(){return this._leftTopHelpers},J.setLeftTopHelpersAlign=function(v){var S=this._leftTopHelpersAlign;this._leftTopHelpersAlign=v,this.fp("leftTopHelpersAlign",S,v)},J.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},J.setRightTopHelpers=function(l){var M=this._rightTopHelpers;this._rightTopHelpers=l,this.fp("rightTopHelpers",M,l)},J.getRightTopHelpers=function(){return this._rightTopHelpers},J.setRightTopHelpersAlign=function(S){var P=this._rightTopHelpersAlign;this._rightTopHelpersAlign=S,this.fp("rightTopHelpersAlign",P,S)},J.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},J.setLeftBottomHelpers=function(g){var l=this._leftBottomHelpers;this._leftBottomHelpers=g,this.fp("leftBottomHelpers",l,g)},J.getLeftBottomHelpers=function(){return this._leftBottomHelpers},J.setLeftBottomHelpersAlign=function(f){var N=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=f,this.fp("leftBottomHelpersAlign",N,f)},J.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},J.setRightBottomHelpers=function(I){var v=this._rightBottomHelpers;this._rightBottomHelpers=I,this.fp("rightBottomHelpers",v,I)},J.getRightBottomHelpers=function(){return this._rightBottomHelpers},J.setRightBottomHelpersAlign=function(t){var h=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=t,this.fp("rightBottomHelpersAlign",h,t)},J.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},J.setEdgeHelpers=function(E){var H=this._edgeHelpers;this._edgeHelpers=E,this.fp("edgeHelpers",H,E)},J.getEdgeHelpers=function(){return this._edgeHelpers},J.isHelperEditable=function(A,J){return A instanceof y&&("host"===J||"edge"===J||"elevation"===J||"tall"===J)?!1:A instanceof k&&("source"===J||"target"===J)?!1:"pointElevation"===J?this._helperEditableFunc?this._helperEditableFunc(A,J):!1:this._helperEditableFunc?this._helperEditableFunc(A,J):!0},J.getEditHelperSize=function(){return this._editHelperSize||(u?28:16)},J.setEditHelperSize=function(s){var c=this._editHelperSize;this._editHelperSize=s,this.fp("editHelperSize",c,s)},J.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},J.setEditRectBorderColor=function(M){var t=this.$28l;this.$28l=M,this.fp("editRectBorderColor",t,M)},J.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},J.setNodeBorderColor=function(j){var T=this.$29l;this.$29l=j,this.fp("nodeBorderColor",T,j)},J.getEditRectBorderStyle=function(){return this.$30l||"dashed"},J.setEditRectBorderStyle=function(J){var u=this.$30l;this.$30l=J,this.fp("editRectBorderStyle",u,J)},J.getControlPointBackground=function(){return this.$31l||"#ff0"},J.setControlPointBackground=function(V){var a=this.$31l;this.$31l=V,this.fp("controlPointBackground",a,V)},J.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},J.setControlPointBorderColor=function(E){var r=this.$32l;this.$32l=E,this.fp("controlPointBorderColor",r,E)},J.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},J.setJoinPointBackground=function(f){var m=this.$33l;this.$33l=f,this.fp("joinPointBackground",m,f)},J.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},J.setJoinPointBorderColor=function(P){var t=this.$34l;this.$34l=P,this.fp("joinPointBorderColor",t,P)},J.getDirectionLineColor=function(){return this.$35l||"#888"},J.setDirectionLineColor=function(r){var g=this.$35l;this.$35l=r,this.fp("directionLineColor",g,r)},J.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},J.setSegmentHoverColor=function(c){var S=this.$36l;this.$36l=c,this.fp("segmentHoverColor",S,c)},J.getSegmentHoverWidth=function(){return this.$22l||(u?16:8)},J.setSegmentHoverWidth=function(v){var t=this.$22l;this.$22l=v,this.fp("segmentHoverWidth",t,v)},J.getSnapPointBorderColor=function(){return this.$38l||"#f00"},J.setSnapPointBorderColor=function(t){var e=this.$38l;this.$38l=t,this.fp("snapPointBorderColor",e,t)},J.getEditRectPadding=function(){return this.$39l!=A?this.$39l:6},J.setEditRectPadding=function(w){var M=this.$39l;this.$39l=w,this.fp("editRectPading",M,w)},J.isRectEditable=function(U){var C=this,T=C._editInteractor;return T instanceof D.XEditInteractor?C._rectEditableFunc?C._rectEditableFunc(U):!0:vk.call(C,U)},J.isPointEditable=function(s){var e=this,B=e._editInteractor;return B instanceof D.XEditInteractor?e._pointEditableFunc?e._pointEditableFunc(s):!0:Pk.call(e,s)},J.validateImpl=function(){var H=this,j=H.$14l,y=H._editInteractor;if(j){var E=H.getWidth(),p=H.getHeight();(E!==j.clientWidth||p!==j.clientHeight)&&(y&&(y._68I=1),n.setCanvas(j,E,p),H._32I=1)}Hl.call(this)},J.isEditable=function($){var u=Ib.call(this,$),w=this._editInteractor;if(w instanceof D.XEditInteractor&&$ instanceof y){if(!$.s("2d.editable"))return!1;var r=this.getEditableFunc();u=r?r($):!0}return u},J._42=function(H,u){var b=this,n=b._editInteractor;Er.call(b,H,u),n instanceof D.XEditInteractor&&n._68I&&n._42()},J.isSnapPoint=function(){return!0};var Bd=function(l){arguments.length>0&&this.$58l(l)},gm=Bd.prototype;gm.$58l=function(E){this.$62l=E,this.points=new Array},gm.$56l=function(M){this.points.push(M)},gm.$57l=function(w){this.points=this.points.concat(w)};var kq=function(g,J){arguments.length>0&&this.$58l(g,J)},Fp=kq.prototype;Fp.$58l=function(T,p){this.x=T,this.y=p},Fp.add=function(M){return new kq(this.x+M.x,this.y+M.y)},Fp.addEquals=function(x){return this.x+=x.x,this.y+=x.y,this},Fp.$55l=function(a){return new kq(this.x*a,this.y*a)},Fp.eq=function(A){return this.x==A.x&&this.y==A.y},Fp.lt=function(e){return this.x<e.x&&this.y<e.y},Fp.lte=function(u){return this.x<=u.x&&this.y<=u.y},Fp.gt=function(M){return this.x>M.x&&this.y>M.y},Fp.gte=function(Z){return this.x>=Z.x&&this.y>=Z.y},Fp.lerp=function(h,u){return new kq(this.x+(h.x-this.x)*u,this.y+(h.y-this.y)*u)},Fp.distanceFrom=function(z){var U=this.x-z.x,y=this.y-z.y;return s(U*U+y*y)},Fp.min=function(i){return new kq(r(this.x,i.x),r(this.y,i.y))},Fp.max=function(G){return new kq(F(this.x,G.x),F(this.y,G.y))},Fp.toString=function(){return this.x+","+this.y};var _q=function(){this.$58l(arguments)},Ti=_q.prototype;_q.TO=1e-6,_q.AC=6,Ti.$58l=function(G){this.co=new Array;for(var N=G.length-1;N>=0;N--)this.co.push(G[N])},Ti.$55l=function(p){for(var G=new _q,B=0;B<=this.$50l()+p.$50l();B++)G.co.push(0);for(var B=0;B<=this.$50l();B++)for(var Q=0;Q<=p.$50l();Q++)G.co[B+Q]+=this.co[B]*p.co[Q];return G},Ti.$59l=function(){for(var f=this.$50l();f>=0&&K(this.co[f])<=_q.TO;f--)this.co.pop()},Ti.$50l=function(){return this.co.length-1},Ti.$51l=function(){var c;switch(this.$59l(),this.$50l()){case 0:c=new Array;break;case 1:c=this.$52l();break;case 2:c=this.$53l();break;case 3:c=this.$54l();break;case 4:c=this.$63l();break;default:c=new Array}return c},Ti.$52l=function(){var x=new Array,a=this.co[1];return 0!=a&&x.push(-this.co[0]/a),x},Ti.$53l=function(){var E=new Array;if(2==this.$50l()){var G=this.co[2],x=this.co[1]/G,K=this.co[0]/G,z=x*x-4*K;if(z>0){var y=s(z);E.push(.5*(-x+y)),E.push(.5*(-x-y))}else 0==z&&E.push(.5*-x)}return E},Ti.$63l=function(){var H=new Array;if(4==this.$50l()){var z=this.co[4],W=this.co[3]/z,v=this.co[2]/z,f=this.co[1]/z,A=this.co[0]/z,B=new _q(1,-v,W*f-4*A,-W*W*A+4*v*A-f*f).$54l(),V=B[0],P=W*W/4-v+V;if(K(P)<=_q.TO&&(P=0),P>0){var x=s(P),U=3*W*W/4-x*x-2*v,k=(4*W*v-8*f-W*W*W)/(4*x),c=U+k,Z=U-k;if(K(c)<=_q.TO&&(c=0),K(Z)<=_q.TO&&(Z=0),c>=0){var h=s(c);H.push(-W/4+(x+h)/2),H.push(-W/4+(x-h)/2)}if(Z>=0){var h=s(Z);H.push(-W/4+(h-x)/2),H.push(-W/4-(h+x)/2)}}else if(0>P);else{var k=V*V-4*A;if(k>=-_q.TO){if(0>k&&(k=0),k=2*s(k),U=3*W*W/4-2*v,U+k>=_q.TO){var T=s(U+k);H.push(-W/4+T/2),H.push(-W/4-T/2)}if(U-k>=_q.TO){var T=s(U-k);H.push(-W/4+T/2),H.push(-W/4-T/2)}}}}return H},Ti.$54l=function(){var U=new Array;if(3==this.$50l()){var O=this.co[3],y=this.co[2]/O,F=this.co[1]/O,u=this.co[0]/O,M=(3*F-y*y)/3,Z=(2*y*y*y-9*F*y+27*u)/27,X=y/3,b=Z*Z/4+M*M*M/27,C=Z/2;if(K(b)<=_q.TO&&(b=0),b>0){var V,W,E=s(b);V=-C+E,W=V>=0?l(V,1/3):-l(-V,1/3),V=-C-E,V>=0?W+=l(V,1/3):W-=l(-V,1/3),U.push(W-X)}else if(0>b){var a=s(-M/3),f=e(s(-b),-C)/3,x=R(f),B=G(f),p=s(3);U.push(2*a*x-X),U.push(-a*(x+p*B)-X),U.push(-a*(x-p*B)-X)}else{var V;V=C>=0?-l(C,1/3):l(-C,1/3),U.push(2*V-X),U.push(-V-X)}}return U};var jj=function(X,n){arguments.length>0&&this.$58l(X,n)},Og=jj.prototype;Og.$58l=function(g,u){this.x=g,this.y=u},Og.length=function(){return s(this.x*this.x+this.y*this.y)},Og.$60l=function(B){return this.x*B.x+this.y*B.y};var Ep=function(i,w,A,b){var S,O=(b.x-A.x)*(i.y-A.y)-(b.y-A.y)*(i.x-A.x),M=(w.x-i.x)*(i.y-A.y)-(w.y-i.y)*(i.x-A.x),n=(b.y-A.y)*(w.x-i.x)-(b.x-A.x)*(w.y-i.y);if(0!=n){var K=O/n,t=M/n;K>=0&&1>=K&&t>=0&&1>=t?(S=new Bd(B),S.points.push(new kq(i.x+K*(w.x-i.x),i.y+K*(w.y-i.y)))):S=new Bd(Q)}else S=0==O||0==M?new Bd("C"):new Bd("P");return S},df=function(c,y,S,V,h){var D,t,k,G,I,Z,L,R=V.min(h),f=V.max(h),F=new Bd(Q);D=y.$55l(-2),k=c.add(D.add(S)),D=c.$55l(-2),t=y.$55l(2),G=D.add(t),I=new kq(c.x,c.y),L=new jj(V.y-h.y,h.x-V.x),Z=V.x*h.y-h.x*V.y;for(var b=new _q(L.$60l(k),L.$60l(G),L.$60l(I)+Z).$51l(),u=0;u<b.length;u++){var o=b[u];if(o>=0&&1>=o){var x=c.lerp(y,o),r=y.lerp(S,o),N=x.lerp(r,o);V.x==h.x?R.y<=N.y&&N.y<=f.y&&(F.$62l=B,F.$56l(N)):V.y==h.y?R.x<=N.x&&N.x<=f.x&&(F.$62l=B,F.$56l(N)):N.gte(R)&&N.lte(f)&&(F.$62l=B,F.$56l(N))}}return F},up=function(P,z,a,m,V){var Z=m.min(V),A=m.max(V),w=new kq(A.x,Z.y),L=new kq(Z.x,A.y),W=df(P,z,a,Z,w),n=df(P,z,a,w,A),c=df(P,z,a,A,L),X=df(P,z,a,L,Z),O=new Bd(Q);return O.$57l(W.points),O.$57l(n.points),O.$57l(c.points),O.$57l(X.points),O.points.length>0&&(O.$62l=B),O},hk=function(L,Z,z,p,V,b){var S,d,j,A,r,v,x,H,g,l,$=V.min(b),i=V.max(b),F=new Bd(Q);S=L.$55l(-1),d=Z.$55l(3),j=z.$55l(-3),A=S.add(d.add(j.add(p))),r=new jj(A.x,A.y),S=L.$55l(3),d=Z.$55l(-6),j=z.$55l(3),A=S.add(d.add(j)),v=new jj(A.x,A.y),S=L.$55l(-3),d=Z.$55l(3),j=S.add(d),x=new jj(j.x,j.y),H=new jj(L.x,L.y),l=new jj(V.y-b.y,b.x-V.x),g=V.x*b.y-b.x*V.y;for(var f=new _q(l.$60l(r),l.$60l(v),l.$60l(x),l.$60l(H)+g).$51l(),_=0;_<f.length;_++){var J=f[_];if(J>=0&&1>=J){var n=L.lerp(Z,J),e=Z.lerp(z,J),U=z.lerp(p,J),M=n.lerp(e,J),o=e.lerp(U,J),I=M.lerp(o,J);V.x==b.x?$.y<=I.y&&I.y<=i.y&&(F.$62l=B,F.$56l(I)):V.y==b.y?$.x<=I.x&&I.x<=i.x&&(F.$62l=B,F.$56l(I)):I.gte($)&&I.lte(i)&&(F.$62l=B,F.$56l(I))}}return F},nr=function(j,t,V,r,E,D){var M=E.min(D),T=E.max(D),d=new kq(T.x,M.y),b=new kq(M.x,T.y),k=hk(j,t,V,r,M,d),q=hk(j,t,V,r,d,T),N=hk(j,t,V,r,T,b),Y=hk(j,t,V,r,b,M),S=new Bd(Q);return S.$57l(k.points),S.$57l(q.points),S.$57l(N.points),S.$57l(Y.points),S.points.length>0&&(S.$62l=B),S},wj=function(G,u,P,O){var q=P.min(O),C=P.max(O),Z=new kq(C.x,q.y),m=new kq(q.x,C.y),K=Ep(q,Z,G,u),_=Ep(Z,C,G,u),l=Ep(C,m,G,u),Y=Ep(m,q,G,u),h=new Bd(Q);return h.$57l(K.points),h.$57l(_.points),h.$57l(l.points),h.$57l(Y.points),h.points.length>0&&(h.$62l=B),h},ul=D.XEditInteractor=function(A){var H=this,k=H._view=document.createElement("canvas");k.className="editCanvas",k.style.position="absolute",ul.superClass.constructor.call(H,A)};Y.def(ul,D.Interactor,{ms_edit:1,setUp:function(){var S=this,P=S.gv,l=P.getView(),k=S._view;ul.superClass.setUp.call(S),P.setEditInteractor(S),P.$14l=k,P._79O?l.insertBefore(k,P._79O):l.appendChild(k);var o=S.$49l=S.$11l.bind(S);P.dm().md(o),P.sm().ms(o),P.mp(o)},tearDown:function(){var P=this,B=P.gv,R=B.getView(),Y=P.$49l;ul.superClass.tearDown.call(P),B.setEditInteractor(A),B.$14l=A,R.removeChild(P._view),B.dm().umd(Y),B.sm().ums(Y),B.ump(Y)},clear:function(){var g=this,F=g.gv;delete g._hoverSegmentIndex,delete g._edge,delete g._shape,delete F._editing,delete g.$10l,delete g.$13l,delete g.$9l,delete g._removePointIndex,delete g._lp,g.$12l="",delete g.$40l,delete g.$67l,delete g.$72l,delete g.$73l,delete g.$75l,delete g.$1l,delete g.$3l,delete g.$2l,delete g.$92l,delete g.$93l,delete g.$94l,g.clearDragging()},handle_keydown:function(O){this.$48l!==O.shiftKey&&(this.$48l=O.shiftKey,this.handle_mousemove(O,j,!0))},handle_keyup:function(f){this.$48l!==f.shiftKey&&(this.$48l=f.shiftKey,this.handle_mousemove(f,j,!0))},handle_touchstart:function(R){this.handle_mousemove(R),this.handle_mousedown(R)},handle_mousedown:function(W){p(W);var v=this,B=v.$13l,T=v.gv,o=T.dm(),K=T.sm(),O=T.getZoom(),Z=T.lp(W),m=Y.isDoubleClick(W),a=Y.isLeftButton(W),J=v.$7l,Q=v._shape,G=v._hoverSegmentIndex,q=v._edge,A=v.$87l,j=v.$88l,y=function(){v._68I||A===v.$87l&&j===v.$88l||v.$43l()};if(7!==v.$67l&&(delete v.$87l,delete v.$88l),a&&(Q||q)&&G>=0&&m&&(Q&&K.contains(Q)||q&&K.contains(q))){var D=Ue.call(v,Q||q,G,Z);return v.addShapePoint(Q||q,G,D),L(function(){v.handle_mousemove(W)},40),void 0}if(a&&(Q||q)&&v._removePointIndex>=0&&m)return v.removeShapePoint(),v.$5l=1,L(function(){v.handle_mousemove(W)},40),void 0;if(!a||!T._editing)return y(),void 0;if(Q&&B>=0){var N=Q.getPoints().get(B),t=Q.p(),d=_e(t,N.x-t.x,N.y-t.y,-J+Q.getRotation());E=_e(t,Z.x-t.x,Z.y-t.y,-J),v.$24l={x:E.x-d.x,y:E.y-d.y},v.startDragging(W),o.beginTransaction(),v.fi({kind:"beginEditPoint",event:W,data:Q,index:B}),v.$88l=B,v.$87l=Q}else if(v.$10l){var i=T.sm().getSelection(),n=v.$6l,R=v.$1l={},c=v.$3l={},$=v.$16l[S[v.$10l]],e={x:n.x,y:n.y},U={x:n.x+n.width/2,y:n.y+n.height/2};v.$24l={x:Z.x-$.x/O,y:Z.y-$.y/O},v.$2l=I(v.$8l),v.$4l=I(n),i.each(function(A){if(A instanceof k){var v=A.p(),f=A.getWidth(),t=A.getHeight(),r=_e(U,v.x-U.x,v.y-U.y,-J);R[A.getId()]={x:v.x-f/2,y:v.y-t/2,width:f,height:t},c[A.getId()]={x:(r.x-e.x)/n.width,y:(r.y-e.y)/n.height}}}),v.startDragging(W),o.beginTransaction(),v.fi({kind:"beginEditRect",event:W,direction:v.$10l})}else if(q&&B>=0){var g=Pd(T.getDataUI(q),q.s("edge.points")),N=g.get(B);v.$24l={x:Z.x-N.x,y:Z.y-N.y},v.startDragging(W),o.beginTransaction(),v.fi({kind:"beginEditPoint",event:W,data:q,index:B}),v.$88l=B,v.$87l=q}else if(v.$40l){var n=v.$6l,U={x:n.x+n.width/2,y:n.y+n.height/2},_=I(v.$23l);_.x/=O,_.y/=O;var X=_e(U,_.x-U.x,_.y-U.y,-J),E=_e(U,Z.x-U.x,Z.y-U.y,-J);v.$24l={x:E.x-X.x,y:E.y-X.y},v.startDragging(W),o.beginTransaction(),v.fi({kind:"beginEditRotation",event:W,data:v._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(v.$67l)>=0){var u=v.$67l;(7===u||8===u||9===u)&&o.beginTransaction(),v.startDragging(W)}else if(v.$71l&&m&&v.$79l(v.$71l,Z)){var x=K.toSelection();o.beginTransaction(),x.each(function(m){o.remove(m)}),o.endTransaction()}y()},$11l:function(){var H=this,f=H.gv;f._editing&&(H.$13l==A||H._shape==A&&H._edge==A)&&(H.$73l==A||1!==H.$67l&&5!==H.$67l&&6!==H.$67l)||(H.$5l=1),H._68I=1},$46l:function(l){var R=this,H=R.gv,J=H.lp(l),Y=[];return yp(H,function(I){var m=H.getDataUI(I);if(m){var N=m._79o();t(N,J)&&Y.push(I)}}),Y},$47l:function(w){var P=this,D=P.$13l,Z=P.gv.dm();P.$10l?(P.fi({kind:"endEditRect",event:w,direction:P.$10l}),Z.endTransaction()):P._shape&&D>=0?(P.fi({kind:"endEditPoint",event:w,data:P._shape,index:D}),Z.endTransaction()):P._edge&&D>=0?(P.fi({kind:"endEditPoint",event:w,data:P._edge,index:D}),Z.endTransaction()):P.$23l&&P.$40l&&(P.fi({kind:"endEditRotation",event:w}),Z.endTransaction())},handleWindowTouchEnd:function(Z){this.handleWindowMouseUp(Z)},handleWindowMouseUp:function(T){var t=this,C=t.gv,R=C.dm(),S=t._shape,V=t._edge,Q=t.$13l,K=t.$40l,N=t.$9l,w=t.$10l,X=t.$67l;if((S||V)&&Q>=0&&N>=0){var p,P;if(S){var m=S.p(),n=S.getRotation();p=S.getPoints(),P=p.get(N),xj(S,m,n,Q,P,!1)}else if(p=Pd(C.getDataUI(V),V.s("edge.points"),!0),P=p.get(N),0===Q){var O=p.get(0);V.s("edge.source.offset.x",P.x-O.x),V.s("edge.source.offset.y",P.y-O.y)}else if(Q===p.size()-1){var x=p.get(p.size()-1);V.s("edge.target.offset.x",P.x-x.x),V.s("edge.target.offset.y",P.y-x.y)}else"points"===V.s("edge.type")&&(p.set(Q,P),V.s("edge.points",js(p)))}t.$47l(T);var z=t.$73l;1===X?(R.beginTransaction(),z?C.sm().each(function(p){if(p.setHost&&C.isHelperEditable(p,"host")){p.setHost(z);
var v=t.$75l,e=t.$74l;v&&(p.s("attach.row.index",v.rowIndex),p.s("attach.column.index",v.columnIndex)),e&&(p.s("attach.index",e.attachIndex),p.s("attach.offset",e.attachOffset),p.s("attach.offset.relative",!1),p.s("attach.offset.opposite",!1))}}):C.sm().each(function(p){p.setHost&&C.isHelperEditable(p,"host")&&(p.setHost(A),p.s("attach.row.index",j),p.s("attach.column.index",j),p.s("attach.index",j),p.s("attach.offset",j),p.s("attach.offset.relative",!1),p.s("attach.offset.opposite",!1))}),R.endTransaction()):2===X?(R.beginTransaction(),z?C.sm().each(function(w){w.setParent&&C.isHelperEditable(w,"parent")&&w.setParent(z)}):C.sm().each(function($){$.setParent&&C.isHelperEditable($,"parent")&&$.setParent(A)}),R.endTransaction()):3===X?z&&(R.beginTransaction(),C.sm().each(function(E){if(C.isHelperEditable(E,"edge")&&E instanceof k&&z instanceof k){var Y=new c.Edge;R.add(Y),Y.setSource(E),Y.setTarget(z),t.onEdgeCreated&&t.onEdgeCreated(T,Y)}}),R.endTransaction()):5===X||6===X?z&&(R.beginTransaction(),C.sm().each(function(n){n instanceof y&&z instanceof k&&(5===X&&C.isHelperEditable(n,"source")?n.setSource(z):6===X&&C.isHelperEditable(n,"source")&&n.setTarget(z))}),R.endTransaction()):(7===X||8===X||9===X)&&R.endTransaction(),(w||K)&&t.$43l(!0),u?(t.clear(),delete t.$64l,t._68I||t.$43l()):(t.handle_mousemove(T,!0),X&&!t._68I&&t.$43l())},handleWindowTouchMove:function(S){this.handleWindowMouseMove(S)},handleWindowMouseMove:function(r){this._78I(r)},handle_mousemove:function(a,D,z){if(!this._pause){if(!z){var y=u?Nh(a):a;this.$61l={clientX:y.clientX,clientY:y.clientY}}if(D===!0||!C()){var E=this,o=E.gv,c=!1,M=A;E.clear(),o.sm().size()>0&&(M=o.lp(z?E.$61l:a),c=E._79I(a,M)),c&&(o._editing=1),E.$12l!==E.$65l&&(E.$65l=E.$12l,E.setCursor(E.$12l)),E.$40l!==E.$64l&&(E.$64l=E.$40l,E._68I||E.$43l()),E._hoverSegmentIndex!==E.$66l&&(E.$66l=E._hoverSegmentIndex,E._68I||E.$43l())}}},_78I:function(o){this.autoScroll(o);var m=this,c=m.gv,N=c.lp(o),X=c.getZoom(),g=m.$13l;if((m._shape||m._edge)&&g>=0){var d,l,q,V=m._shape,D=m._edge,C=m.$24l,p=c.getPointSnapSpacing(),B=function(l,T){return p==A||isNaN(p)?{x:l,y:T}:{x:w(l/p)*p,y:w(T/p)*p}};if(V){d=V.getPoints();var b=V.p(),i=V.getRotation(),v=0;l=_e(b,N.x-b.x,N.y-b.y,-i),xj(V,b,i,g,N,!0,C,B),m.fi({kind:"betweenEditPoint",event:o,data:V,index:g})}else if(D){d=Pd(c.getDataUI(D),D.s("edge.points"),!0),N.x-=C.x,N.y-=C.y,l=N;var H,O,W=D.s("edge.offset"),_=d.size(),a=_>2;if(0===g){var G=d.get(0);W&&(G=Jm(G,d.get(1),-W,a),N=Jm(N,d.get(1),-W,a)),H=N.x-G.x,O=N.y-G.y,q=B(H,O),D.s("edge.source.offset.x",q.x),D.s("edge.source.offset.y",q.y)}else if(g===_-1){var t=d.get(_-1);W&&(t=Jm(t,d.get(_-2),-W,a),N=Jm(N,d.get(_-2),-W,a)),H=N.x-t.x,O=N.y-t.y,q=B(H,O),D.s("edge.target.offset.x",q.x),D.s("edge.target.offset.y",q.y)}else"points"===D.s("edge.type")&&(q=B(N.x,N.y),q.e=d.get(g).e,d.set(g,q),D.s("edge.points",js(d)));m.fi({kind:"betweenEditPoint",event:o,data:D,index:g})}if(delete m.$9l,c.isSnapPoint(V)||c.isSnapPoint(D))for(v=0;v<d.size();v++)if(v!==g){var S=d.get(v);if(P(S,l)<c.getEditPointSize()/X){m.$9l=v;break}}}else if(m.$10l){var C=m.$24l;N.x-=C.x,N.y-=C.y;var x=c.sm().getSelection(),u=m.$1l,j=m.$7l,E=m.$10l,z=m.$4l,T=m.$2l,F=c.getEditRectPadding()/X,h=2*F,I=c.getSnapSpacing(),U=I!=A&&!isNaN(I),R=Ak(T,N,E,j,2*F,c.getResizeMode(),U,!0),n=m.$6l;if(U){var r=R.width-h,Q=R.height-h,J=w(r/I)*I,hc=w(Q/I)*I,Ub=J-r,Lm=hc-Q;("west"===E||"northwest"===E||"southwest"===E)&&(Ub=-Ub),("north"===E||"northwest"===E||"northeast"===E)&&(Lm=-Lm),R=Ak(T,N,E,j,2*F,c.getResizeMode(),U,!1,Ub,Lm)}m.$8l=R,n.x=R.x+F,n.y=R.y+F,n.width=R.width-h,n.height=R.height-h;var cg=R.x+R.width/2,sn=R.y+R.height/2,sd=n.x,kl=n.y,rm=n.width/z.width,$f=n.height/z.height;x.each(function(C){if(C instanceof k&&c.isEditable(C)&&c.isRectEditable(C)){var h=u[C.getId()],Y=m.$3l[C.getId()],G={x:h.x+h.width/2,y:h.y+h.height/2},T=0,v=0,V=E,z=180*K(j-C.getRotation())/M;"northeast"===E?z>=315||45>z?(T=h.width*rm+h.x,v=h.height*(1-$f)+h.y,V="northeast"):z>=45&&135>z?(T=h.width*(1-$f)+h.x,v=h.height*(1-rm)+h.y,V="northwest"):z>=135&&225>z?(T=h.width*(1-rm)+h.x,v=h.height*$f+h.y,V="southwest"):(T=h.width*$f+h.x,v=h.height*rm+h.y,V="southeast"):"north"===E?z>=315||45>z?(v=h.height*(1-$f)+h.y,V="north"):z>=45&&135>z?(T=h.width*(1-$f)+h.x,V="west"):z>=135&&225>z?(v=h.height*$f+h.y,V="south"):(T=h.width*$f+h.x,V="east"):"northwest"===E?z>=315||45>z?(T=h.width*(1-rm)+h.x,v=h.height*(1-$f)+h.y,V="northwest"):z>=45&&135>z?(T=h.width*(1-$f)+h.x,v=h.height*rm+h.y,V="southwest"):z>=135&&225>z?(T=h.width*rm+h.x,v=h.height*$f+h.y,V="southeast"):(T=h.width*$f+h.x,v=h.height*(1-rm)+h.y,V="northeast"):"west"===E?z>=315||45>z?(T=h.width*(1-rm)+h.x,V="west"):z>=45&&135>z?(v=h.height*rm+h.y,V="south"):z>=135&&225>z?(T=h.width*rm+h.x,V="east"):(v=h.height*(1-rm)+h.y,V="north"):"southwest"===E?z>=315||45>z?(T=h.width*(1-rm)+h.x,v=h.height*$f+h.y,V="southwest"):z>=45&&135>z?(T=h.width*$f+h.x,v=h.height*rm+h.y,V="southeast"):z>=135&&225>z?(T=h.width*rm+h.x,v=h.height*(1-$f)+h.y,V="northeast"):(T=h.width*(1-$f)+h.x,v=h.height*(1-rm)+h.y,V="northwest"):"east"===E?z>=315||45>z?(T=h.width*rm+h.x,V="east"):z>=45&&135>z?(v=h.height*(1-rm)+h.y,V="north"):z>=135&&225>z?(T=h.width*(1-rm)+h.x,V="west"):(v=h.height*rm+h.y,V="south"):"south"===E?z>=315||45>z?(v=h.height*$f+h.y,V="south"):z>=45&&135>z?(T=h.width*$f+h.x,V="east"):z>=135&&225>z?(v=h.height*(1-$f)+h.y,V="north"):(T=h.width*(1-$f)+h.x,V="west"):"southeast"===E&&(z>=315||45>z?(T=h.width*rm+h.x,v=h.height*$f+h.y,V="southeast"):z>=45&&135>z?(T=h.width*$f+h.x,v=h.height*(1-rm)+h.y,V="northeast"):z>=135&&225>z?(T=h.width*(1-rm)+h.x,v=h.height*(1-$f)+h.y,V="northwest"):(T=h.width*(1-$f)+h.x,v=h.height*rm+h.y,V="southwest"));var f=_e(G,T-G.x,v-G.y,C.getRotation());Sh(C,h,V,{x:f.x,y:f.y});var H=sd+n.width*Y.x,N=kl+n.height*Y.y,s={x:H,y:N};s=_e({x:cg,y:sn},s.x-cg,s.y-sn,j),C.p(s.x,s.y)}}),m.fi({kind:"betweenEditRect",event:o,direction:E})}else if(m.$23l&&m.$40l){var $c=m.$8l,Bm=$c.width,Do=$c.height,b={x:$c.x+Bm/2,y:$c.y+Do/2},C=m.$24l,fg=m.$23l,Xe=fg.x/X-b.x,rj=fg.y/X-b.y,Ei=s(Xe*Xe+rj*rj),Ql=Math.asin(C.x/Ei),Vo=c.sm().getSelection(),kf=f+e(N.y-b.y,N.x-b.x)-Ql,Or=c.getSnapAngle(),kf=w(kf/Or)*Or;0>kf&&(kf+=$);var Bj=kf-m.$7l,se=[b.x,0,b.y];Vo.each(function(j){if(c.isEditable(j)&&c.isRotationEditable(j)&&c.isVisible(j)){var L=Fq(j.p3(),se),i=Yq();fm(i,-Bj),j.setRotation(j.getRotation()+Bj),Sp(L,i),j.p3(se[0]+L[0],se[1]+L[1],se[2]+L[2])}}),m.$7l=kf,m.fi({kind:"betweenEditRotation",event:o})}else if([1,2,3,5,6].indexOf(m.$67l)>=0)m.$72l=o,m.$78l||(m.$78l=1,L(function(){Y.isDragging()&&m.$43l(),delete m.$78l},12));else if(7===m.$67l){if(m.$87l instanceof Z){var V=m.$87l,hk=m.$88l,zh=Y.clone(V.getPoints().get(hk)),Nh=N.y-zh.y;zh.e||(zh.e=0),m.$92l||(m.$92l=zh.e),zh.e=m.$92l-Nh,V.setPoint(hk,zh)}else if(m.$87l instanceof y){var D=m.$87l,hk=m.$88l,d=Pd(c.getDataUI(D),D.s("edge.points")),zh=d.get(hk),Nh=N.y-zh.y;zh.e||(zh.e=0),m.$92l||(m.$92l=zh.e),zh.e=m.$92l-Nh,d.set(hk,zh),D.s("edge.points",js(d))}}else if(8===m.$67l){var Vo=c.sm().getSelection(),po=m.$93l;po||(po=m.$93l={}),Vo.each(function(w){if(w.p3){var E=w.p3(),d=po[w.getId()];d==A&&(d=po[w.getId()]=E[1]),w.p3([E[0],d-(N.y-m.$90l.y/X),E[2]])}})}else if(9===m.$67l){var Vo=c.sm().getSelection(),Kf=m.$94l;Kf||(Kf=m.$94l={}),Vo.each(function(S){if(S.s3){var s=S.s3(),p=Kf[S.getId()];p==A&&(p=Kf[S.getId()]=s[1]);var J=p-(N.y-m.$91l.y/X);0>J&&(J=.01),S.s3([s[0],J,s[2]])}})}},$79l:function(u,Z){var E=this,w=E.gv,U=w.getZoom(),W=w.getEditHelperSize(),s=u.x/U,r=u.y/U,i=W/U,z=i/2;return t({x:s-z,y:r-z,width:i,height:i},Z)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(B,h){for(var T=this,W=T.gv,Q=W.getZoom(),f=W.getEditPointSize(),A=f/Q,$=A/2,L=T.$46l(B),O=0;O<L.length;O++){var i,l,G=L[O],c=W.getDataUI(G);if(c&&c._55O){var z=c._55O;if(z._43O&&G instanceof y){if(i=G.s("edge.points"),i=Pd(c,i),l=G.s("edge.segments"),l&&l.size()||(l=xc(i)),T.$42l(G,h,i._as,l,"edge"))return!0;if("points"===G.s("edge.type")&&T.$41l(G,h,i._as,l,"edge"))return}if(z._43O&&G instanceof Z&&z.$15l&&z.$15l.length===G.getPoints().size()){if(i=z.$15l,l=G.getSegments(),l&&l.size()||(l=xc(i)),T.$42l(G,h,i,l,"shape"))return!0;if(T.$41l(G,h,i,l,"shape"))return}}}if(T.$16l){var i,R=T.$16l,U=R[3].x-R[7].x,H=R[3].y-R[7].y,b=s(U*U+H*H),D=R[1].x-R[5].x,w=R[1].y-R[5].y,x=s(D*D+w*w),I={x:h.x*Q,y:h.y*Q};if(T._80I(I,0,R[0],"northwest",b,x)||T._80I(I,1,R[1],"north",b,x)||T._80I(I,2,R[2],"northeast",b,x)||T._80I(I,7,R[7],"west",b,x)||T._80I(I,3,R[3],"east",b,x)||T._80I(I,6,R[6],"southwest",b,x)||T._80I(I,5,R[5],"south",b,x)||T._80I(I,4,R[4],"southeast",b,x))return!0}if(T.$23l){var g=T.$23l,j=g.x/Q,N=g.y/Q;if(t({x:j-$,y:N-$,width:A,height:A},h))return T.$40l=1,T.$12l=T.getHelperCursor("rotation")||"crosshair",!0}return T.$68l&&T.$79l(T.$68l,h)?(T.$67l=1,T.$12l=T.getHelperCursor("host")||"crosshair",!0):T.$69l&&T.$79l(T.$69l,h)?(T.$67l=2,T.$12l=T.getHelperCursor("parent")||"crosshair",!0):T.$70l&&T.$79l(T.$70l,h)?(T.$67l=3,T.$12l=T.getHelperCursor("edge")||"crosshair",!0):T.$71l&&T.$79l(T.$71l,h)?(T.$67l=4,T.$12l=T.getHelperCursor("remove")||"crosshair",!0):T.$82l&&T.$79l(T.$82l,h)?(T.$67l=5,T.$12l=T.getHelperCursor("source")||"crosshair",!0):T.$83l&&T.$79l(T.$83l,h)?(T.$67l=6,T.$12l=T.getHelperCursor("target")||"crosshair",!0):T._pointElevationHelperPoint&&T.$79l(T._pointElevationHelperPoint,h)?(T.$67l=7,T.$12l=T.getHelperCursor("pointElevation")||"crosshair",!0):T.$90l&&T.$79l(T.$90l,h)?(T.$67l=8,T.$12l=T.getHelperCursor("elevation")||"crosshair",!0):T.$91l&&T.$79l(T.$91l,h)?(T.$67l=9,T.$12l=T.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(W,K,G,e,$,p){var S=this,u=S.gv,F=u.getEditPointSize(),E=F/2,L=u.sm(),f=u.isDirectionEditable;if(f&&1===L.size()){var s=L.ld();if(f=f.bind(u),s instanceof k){if(!f(s,e))return!1;if("east"===e){if(f(s,"northeast")&&f(s,"southeast")&&2*F>=p)return!1}else if("west"===e){if(f(s,"northwest")&&f(s,"southwest")&&2*F>=p)return!1}else if("north"===e){if(f(s,"northwest")&&f(s,"northeast")&&2*F>=$)return!1}else if("south"===e&&f(s,"southwest")&&f(s,"southeast")&&2*F>=$)return!1}}else{if(2*F>=$&&("north"===e||"south"===e))return!1;if(2*F>=p&&("east"===e||"west"===e))return!1}if(t({x:G.x-E,y:G.y-E,width:F,height:F},W)){if(S.$10l!==e){var j=180*S.$7l/M,R="";j>=337.5||22.5>j?R="north":j>=22.5&&67.5>j?R="northeast":j>=67.5&&112.5>j?R="east":j>=112.5&&157.5>j?R="southeast":j>=157.5&&202.5>j?R="south":j>=202.5&&247.5>j?R="southwest":j>=247.5&&292.5>j?R="west":j>=292.5&&337.5>j&&(R="northwest");var Q=Jb.indexOf(R),R=Jb[K-(1-Q)+8];switch(R){case"northwest":S.$12l="nwse-resize";break;case"northeast":S.$12l="nesw-resize";break;case"southwest":S.$12l="nesw-resize";break;case"southeast":S.$12l="nwse-resize";break;case"north":S.$12l="ns-resize";break;case"east":S.$12l="ew-resize";break;case"south":S.$12l="ns-resize";break;case"west":S.$12l="ew-resize"}S.$10l=e}return!0}return!1},$42l:function(a,i,e,m,g){var k,S=this,Q=S.gv,Y=Q.getEditPointSize(),p=Y/Q.getZoom(),u=-1,J={x:i.x,y:i.y,width:0,height:0},N=function(u){"shape"===g?S._shape=a:S._edge=a,S._removePointIndex=u},c=function(F){"shape"===g?S._shape=a:S._edge=a,S.$13l=F,S.$12l="crosshair"};for(d(J,p/2),u=e.length-1,k=m.size()-1;k>=0;k--){var F=m.get(k);if(1===F||2===F)u-=1;else if(3===F){var I=e[u-1];if(t(J,I))return c(u-1),!0;u-=2}else if(4===F){var D=e[u-1],s=e[u-2];if(t(J,D))return c(u-1),!0;if(t(J,s))return c(u-2),!0;u-=3}}for(u=e.length-1,k=m.size()-1;k>=0;k--){var F=m.get(k),z=e[u];if(t(J,z))return N(u),c(u),!0;1===F||2===F?u-=1:3===F?u-=2:4===F&&(u-=3)}return!1},$41l:function(r,j,g,O,P){var k=this,l=k.gv,b=-1,G=0,J={x:j.x,y:j.y,width:0,height:0},R=function(I,x){k._hoverSegmentIndex=x,k._lp=j,"shape"===P?k._shape=r:k._edge=r};for(d(J,l.getSegmentHoverWidth()/2/l.getZoom()),r instanceof Z&&r.isClosePath()&&O.indexOf(5)<0&&(O=new i(O._as),O.add(5));G<O.size();G++){var x=O.get(G);if(1===x){var m=g[b],y=g[b+1];if(m){var e=wj(new kq(m.x,m.y),new kq(y.x,y.y),new kq(J.x,J.y),new kq(J.x+J.width,J.y+J.height));if(e.$62l===B&&e.points.length>0)return R(e,G),!0}b+=1}else if(2===x){var m=g[b],y=g[b+1],e=wj(new kq(m.x,m.y),new kq(y.x,y.y),new kq(J.x,J.y),new kq(J.x+J.width,J.y+J.height));if(e.$62l===B&&e.points.length>0)return R(e,G),!0;b+=1}else if(3===x){var m=g[b],c=g[b+1],K=g[b+2],e=up(new kq(m.x,m.y),new kq(c.x,c.y),new kq(K.x,K.y),new kq(J.x,J.y),new kq(J.x+J.width,J.y+J.height));if(e.$62l===B)return R(e,G),!0;b+=2}else if(4===x){var m=g[b],V=g[b+1],z=g[b+2],K=g[b+3],e=nr(new kq(m.x,m.y),new kq(V.x,V.y),new kq(z.x,z.y),new kq(K.x,K.y),new kq(J.x,J.y),new kq(J.x+J.width,J.y+J.height));if(e.$62l===B)return R(e,G),!0;b+=3}else if(5===x){var m=g[b],y=g[0];if(m){var e=wj(new kq(m.x,m.y),new kq(y.x,y.y),new kq(J.x,J.y),new kq(J.x+J.width,J.y+J.height));if(e.$62l===B&&e.points.length>0)return R(e,G),!0}}}return!1},addShapePoint:function(E,M,B){var f=this,K=f.gv,e=K.dm();if(e.beginTransaction(),0===arguments.length&&(E=f._shape||f._edge,M=f._hoverSegmentIndex,B=f._lp),E instanceof Z||E instanceof y){var O=Rl(E,K.getDataUI(E),M);if(!isNaN(M)&&B&&!isNaN(O)){var C=B;if(E instanceof Z){var X=E.p(),j=E.getRotation(),N=E.toSegments();N&&N.size()||(N=xc(E.getPoints())),E.isClosePath()&&N.indexOf(5)<0&&(N=new i(N._as),N.add(5));var $=N.get(M),G="addPoint",h="removePointAt";if(2===$||1===$){var p={x:C.x,y:C.y};N.add($,M),p=_e(X,p.x-X.x,p.y-X.y,-j),E[G](p,O+1)}else if(3===$){var r=E.getPoints(),H=r.get(O),q=r.get(O+2),p={x:C.x,y:C.y};p=_e(X,p.x-X.x,p.y-X.y,-j);var V=_f(H,p),T=_f(p,q);N.removeAt(M),N.add(3,M),N.add(3,M),E.setPoint(O+1,p),E[G](T,O+2),E[G](V,O+1)}else if(4===$){var r=E.getPoints(),H=r.get(O),q=r.get(O+3),p={x:C.x,y:C.y};p=_e(X,p.x-X.x,p.y-X.y,-j);var V=Ch(H,p),T=Zb(H,p),b=Ch(p,q),c=Zb(p,q);N.removeAt(M),N.add(4,M),N.add(4,M),E[h](O+1),E[h](O+1),E[G](p,O+1),E[G](c,O+2),E[G](b,O+2),E[G](T,O+1),E[G](V,O+1)}else if(5===$){var p={x:C.x,y:C.y};N.add(2,M),p=_e(X,p.x-X.x,p.y-X.y,-j),E[G](p,O+1)}E.isClosePath()&&N.remove(5),E.setSegments(N);var Y=E.getWidth(),J=E.getHeight(),m=E.p().x-Y/2,S=E.p().y-J/2;m-=X.x,S-=X.y;var k=tl(E,{x:m,y:S,width:Y,height:J},j,X);E.p(k.x,k.y)}else if(E instanceof y){if("points"!==E.s("edge.type"))return e.endTransaction(),void 0;var r=E.s("edge.points");N=E.s("edge.segments"),r=Pd(K.getDataUI(E),r),N&&N.size()||(N=xc(r)),N=new i(N._as.slice(0)),r=new i(r._as.slice(0));var $=N.get(M);if(2===$||1===$){var p={x:C.x,y:C.y};N.add($,M),r.add(p,O+1)}else if(3===$){var H=r.get(O),q=r.get(O+2),p={x:C.x,y:C.y},V=_f(H,p),T=_f(p,q);N.removeAt(M),N.add(3,M),N.add(3,M),r.set(O+1,p),r.add(T,O+2),r.add(V,O+1)}else if(4===$){var H=r.get(O),q=r.get(O+3),p={x:C.x,y:C.y},V=Ch(H,p),T=Zb(H,p),b=Ch(p,q),c=Zb(p,q);N.removeAt(M),N.add(4,M),N.add(4,M),r.removeAt(O+1),r.removeAt(O+1),r.add(p,O+1),r.add(c,O+2),r.add(b,O+2),r.add(T,O+1),r.add(V,O+1)}E.s("edge.points",js(r)),E.s("edge.segments",N)}}}e.endTransaction()},removeShapePoint:function(k,V){var c=this,O="removeAt",M=c.gv,q=M.dm();if(q.beginTransaction(),0===arguments.length&&(k=c._shape||c._edge,V=c._removePointIndex),V>=0&&(k instanceof Z||k instanceof y)){var d=Ad(k,c.gv.getDataUI(k),V),o=V;if(k instanceof Z){var E=k.p(),T=k.toSegments();T&&T.size()||(T=xc(k.getPoints()));var r=T.get(d),I="removePointAt";if(1===r&&0===o)if(k.getPoints().size()>1){var x=T.get(d+1);T[O](d+1),3===x?k[I](o+1):4===x&&(k[I](o+2),k[I](o+1)),k[I](o)}else k.dm().remove(k);else 2===r||1===r?(T[O](d),k[I](o)):3===r?(T[O](d),k[I](o),k[I](o-1)):4===r&&(T[O](d),k[I](o),k[I](o-1),k[I](o-2));k.setSegments(T);var R=k.getWidth(),Q=k.getHeight(),J=k.p().x-R/2,Y=k.p().y-Q/2;J-=E.x,Y-=E.y;var F=tl(k,{x:J,y:Y,width:R,height:Q},k.getRotation(),E);k.p(F.x,F.y)}else if(k instanceof y){if("points"!==k.s("edge.type"))return q.endTransaction(),void 0;var N=k.s("edge.points");if(T=k.s("edge.segments"),N&&(N=Pd(c.gv.getDataUI(k),N),T&&T.size()||(T=xc(N))),0===V||V===N.size()-1)return q.endTransaction(),void 0;T=new i(T._as.slice(0)),N=new i(N._as.slice(0));var r=T.get(d);2===r||1===r?(T[O](d),N[O](o)):3===r?(T[O](d),N[O](o),N[O](o-1)):4===r&&(T[O](d),N[O](o),N[O](o-1),N[O](o-2)),k.s("edge.segments",T),k.s("edge.points",js(N))}}q.endTransaction()},changeShapeSegment:function(o,g,d){var q=this,m=q.gv,Q=m.dm();if(Q.beginTransaction(),1!==arguments.length||isNaN(o)||(d=o,o=q._shape||q._edge,g=q._hoverSegmentIndex),o instanceof Z||o instanceof y){var r=Rl(o,q.gv.getDataUI(o),g);if(!isNaN(g)&&!isNaN(r))if(o instanceof Z){var Y=o.p(),u=o.toSegments();u&&u.size()||(u=xc(o.getPoints()));var A=u.get(g),F=o.toPoints();if(1===d||2===d)1===A||2===A?u.set(g,d):3===A?(u.set(g,d),F.removeAt(r+1)):4===A&&(u.set(g,d),F.removeAt(r+1),F.removeAt(r+1));else if(3===d){var L=function(){var l=F.get(r),S=F.get(r+1),W=_f(l,S);u.set(g,3),F.add(W,r+1)};2===A||1===A?L():4===A&&(F.removeAt(r+1),F.removeAt(r+1),L())}else if(4===d){var U=function(){var m=F.get(r),C=F.get(r+1),q=Ch(m,C),G=Zb(m,C);u.set(g,4),F.add(q,r+1),F.add(G,r+2)};2===A||1===A?U():3===A&&(F.removeAt(r+1),U())}o.setSegments(u),o.setPoints(F);var V=o.getWidth(),p=o.getHeight(),j=o.p().x-V/2,P=o.p().y-p/2;j-=Y.x,P-=Y.y;var n=new tl(o,{x:j,y:P,width:V,height:p},o.getRotation(),Y);o.p(n.x,n.y)}else if(o instanceof y){if("points"!==o.s("edge.type"))return Q.endTransaction(),void 0;var F=o.s("edge.points");u=o.s("edge.segments"),F&&(F=Pd(q.gv.getDataUI(o),F),u&&u.size()||(u=xc(F))),u=new i(u._as.slice(0)),F=new i(F._as.slice(0));var A=u.get(g);if(1===d||2===d)1===A||2===A?u.set(g,d):3===A?(u.set(g,d),F.removeAt(r+1)):4===A&&(u.set(g,d),F.removeAt(r+1),F.removeAt(r+1));else if(3===d){var L=function(){var I=F.get(r),Z=F.get(r+1),$=_f(I,Z);u.set(g,3),F.add($,r+1)};2===A||1===A?L():4===A&&(F.removeAt(r+1),F.removeAt(r+1),L())}else if(4===d){var U=function(){var z=F.get(r),G=F.get(r+1),T=Ch(z,G),L=Zb(z,G);u.set(g,4),F.add(T,r+1),F.add(L,r+2)};2===A||1===A?U():3===A&&(F.removeAt(r+1),U())}o.s("edge.points",js(F)),o.s("edge.segments",u)}}Q.endTransaction()},getDefaultSegments:function(q){var X=this.gv,z=X.getDataUI(q);if(q instanceof y){var $=q.s("edge.points");return $=Pd(z,$),xc($)}if(q instanceof Z){var $=q.getPoints(),_=q.getSegments();return _&&_.size()>0?_:xc($)}},$43l:function(E){var B=this;E&&(B.$5l=1),B._68I=1,B._42()},_42:function(){var g=this;if(g._68I){delete g._68I;var B=g.gv,M=g.$5l,v=B.getZoom(),D=B.getEditPointSize(),L=D/2,F=new i,e=g._view,f=g._edge,m=g._shape,_=e.getContext("2d"),a=B.tx(),E=B.ty(),P=A,J=B.getEditPointBackground(),U=B.getControlPointBackground(),q=B.getControlPointBorderColor(),t=B.getEditPointBorderColor(),l=B.getEditRectBorderColor(),z=B.getDirectionLineColor(),H=B.getSegmentHoverColor(),G=B.getSnapPointBorderColor(),j=B.getJoinPointBackground(),W=B.getJoinPointBorderColor(),C=B.getSegmentHoverWidth(),r=[5,5],S=B.getEditRectBorderStyle();zd(B,function(Z){B.isSelected(Z)&&B.isVisible(Z)&&F.add(Z)}),_.clearRect(0,0,O(e.width),O(e.height)),_.save(),n.translateAndScale(_,a,E,1);var h=A,p={x:0,y:0,width:0,height:0},u=0,X=0,K=0,Q=0,R=0,w=0,Ve=0,qs=0,Mj=0,gh=0,Bl=[];if(M?(delete g.$6l,delete g.$8l,delete g.$7l,delete g.$16l,delete g.$23l):(h=g.$6l,P=g.$7l),delete g.$68l,delete g.$69l,delete g.$71l,delete g.$70l,delete g.$82l,delete g.$83l,delete g._pointElevationHelperPoint,delete g.$90l,delete g.$91l,delete g.$75l,delete g.$74l,F.each(function(A){var Z=B.getDataUI(A);if(Z){var I=Z._55O;if(B.isEditable(A))I._56O&&A instanceof k&&X++,Bl.push(A),I._42O&&A instanceof k&&u++,B.isHelperEditable(A,"host")&&Q++,B.isHelperEditable(A,"parent")&&K++,B.isHelperEditable(A,"remove")&&R++,B.isHelperEditable(A,"edge")&&w++,B.isHelperEditable(A,"source")&&Ve++,B.isHelperEditable(A,"target")&&qs++,B.isHelperEditable(A,"elevation")&&Mj++,B.isHelperEditable(A,"tall")&&gh++;else if(A instanceof o&&A.isExpanded()){var r=!0,W=B.getEditableFunc();W&&(r=W(A)),r&&(B.isHelperEditable(A,"host")&&Q++,B.isHelperEditable(A,"parent")&&K++,B.isHelperEditable(A,"remove")&&R++,B.isHelperEditable(A,"edge")&&w++,B.isHelperEditable(A,"source")&&Ve++,B.isHelperEditable(A,"target")&&qs++,B.isHelperEditable(A,"elevation")&&Mj++,B.isHelperEditable(A,"tall")&&gh++,Bl.push(A))}}}),_.beginPath(),_.lineWidth=1,_.strokeStyle=B.getNodeBorderColor(),Bl.forEach(function(l){var c=B.getDataUI(l),K=c._55O;if(M)if(P==A&&(P=l instanceof y?0:l instanceof o&&l.isExpanded()?0:l.getRotation(),g.$7l=P),h==A){var x,n,R;if(l instanceof o&&l.isExpanded()||l instanceof y){var E=B.getDataUIBounds(l);n=E.width,R=E.height,x={x:E.x+n/2,y:E.y+R/2}}else x=l.p(),n=l.getWidth(),R=l.getHeight();h={x:x.x,y:x.y,width:0,height:0},p.x=x.x-n/2,p.y=x.y-R/2,p.width=n,p.height=R,h=b(h,p)}else{var x,n,R,Z,f=h.x+h.width/2,m=h.y+h.height/2,s={x:f,y:m};if(l instanceof o&&l.isExpanded()||l instanceof y){Z=0;var E=B.getDataUIBounds(l);n=E.width,R=E.height,x={x:E.x+n/2,y:E.y+R/2}}else x=l.p(),n=l.getWidth(),R=l.getHeight(),Z=l.getRotation();var V={x:x.x-n/2,y:x.y-R/2,width:n,height:R},H={x:V.x,y:V.y},i={x:V.x+V.width,y:V.y},Y={x:V.x,y:V.y+V.height},F={x:V.x+V.width,y:V.y+V.height},H=_e(x,H.x-x.x,H.y-x.y,Z),Y=_e(x,Y.x-x.x,Y.y-x.y,Z),F=_e(x,F.x-x.x,F.y-x.y,Z),i=_e(x,i.x-x.x,i.y-x.y,Z),L=-P,I=_e(s,H.x-s.x,H.y-s.y,L),z=_e(s,i.x-s.x,i.y-s.y,L),G=_e(s,Y.x-s.x,Y.y-s.y,L),Q=_e(s,F.x-s.x,F.y-s.y,L),w=N([I,z,G,Q]);h=b(h,w),h.x-=f,h.y-=m;var X=tl(A,h,P,s);h.x=X.x-h.width/2,h.y=X.y-h.height/2}if(u>1&&B.isEditable(l)&&B.isRectEditable(l)&&l instanceof k){var D=l.getRect(),d=K.$45l,$=nf(d[0],v),q=nf(d[2],v),j=nf(d[4],v),S=nf(d[6],v);l.getRotation()?(_.moveTo($.x,$.y),_.lineTo(q.x,q.y),_.lineTo(j.x,j.y),_.lineTo(S.x,S.y),_.lineTo($.x,$.y)):_.rect(D.x*v,D.y*v,D.width*v,D.height*v)}}),_.stroke(),h){g.$6l=I(h),d(h,B.getEditRectPadding()/v);var Go={x:h.x+h.width/2,y:h.y+h.height/2},to=il(Go,h.width,h.height,P),io=to[0],me=to[1],Bo=to[2],yn=to[3],ls=to[4],Ug=to[5],Ak=to[6],ai=to[7];if(io=nf(to[0],v),me=nf(to[1],v),Bo=nf(to[2],v),yn=nf(to[3],v),ls=nf(to[4],v),Ug=nf(to[5],v),Ak=nf(to[6],v),ai=nf(to[7],v),g.$8l=h,u>0&&(g.$16l=[io,ls,me,Ug,yn,Ak,Bo,ai],_.beginPath(),_.lineWidth=1,_.strokeStyle=l,"dashed"===S&&_.setLineDash&&_.setLineDash(r),_.moveTo(io.x,io.y),_.lineTo(me.x,me.y),_.lineTo(yn.x,yn.y),_.lineTo(Bo.x,Bo.y),_.lineTo(io.x,io.y),_.stroke(),"dashed"===S&&_.setLineDash&&_.setLineDash([])),_.beginPath(),_.lineWidth=1,_.fillStyle=J,_.strokeStyle=t,u>0){var Dl=Ug.x-ai.x,Gr=Ug.y-ai.y,qn=s(Dl*Dl+Gr*Gr),ih=ls.x-Ak.x,ud=ls.y-Ak.y,_k=s(ih*ih+ud*ud),Mr=2*D;if(B.isDirectionEditable&&1===Bl.length){var ug=Bl[0],jq=B.getDataUI(ug),ue=jq._55O,Fn=B.isDirectionEditable.bind(B);if(ue._42O){var Np,gn,nm,fo;Fn(ug,"northwest")&&(Np=!0,_.rect(io.x-L,io.y-L,D,D)),Fn(ug,"northeast")&&(gn=!0,_.rect(me.x-L,me.y-L,D,D)),Fn(ug,"southwest")&&(nm=!0,_.rect(Bo.x-L,Bo.y-L,D,D)),Fn(ug,"southeast")&&(fo=!0,_.rect(yn.x-L,yn.y-L,D,D)),Fn(ug,"north")&&(Np&&gn?qn>Mr&&_.rect(ls.x-L,ls.y-L,D,D):_.rect(ls.x-L,ls.y-L,D,D)),Fn(ug,"south")&&(fo&&nm?qn>Mr&&_.rect(Ak.x-L,Ak.y-L,D,D):_.rect(Ak.x-L,Ak.y-L,D,D)),Fn(ug,"west")&&(nm&&Np?_k>Mr&&_.rect(ai.x-L,ai.y-L,D,D):_.rect(ai.x-L,ai.y-L,D,D)),Fn(ug,"east")&&(fo&&gn?_k>Mr&&_.rect(Ug.x-L,Ug.y-L,D,D):_.rect(Ug.x-L,Ug.y-L,D,D))}}else qn>Mr&&(_.rect(ls.x-L,ls.y-L,D,D),_.rect(Ak.x-L,Ak.y-L,D,D)),_k>Mr&&(_.rect(Ug.x-L,Ug.y-L,D,D),_.rect(ai.x-L,ai.y-L,D,D)),_.rect(io.x-L,io.y-L,D,D),_.rect(me.x-L,me.y-L,D,D),_.rect(Bo.x-L,Bo.y-L,D,D),_.rect(yn.x-L,yn.y-L,D,D)}if(X>0){var fg=g.$23l=_e(ls,0,2*-D,P);_.moveTo(fg.x+L,fg.y),_.arc(fg.x,fg.y,L,0,$,!1)}_.fill(),_.stroke(),g.$40l&&g.$44l(_,h,P);var xj,Oe,Eq=B.getLeftTopHelpers(),hq=B.getRightTopHelpers(),$j=B.getLeftBottomHelpers(),Vp=B.getRightBottomHelpers(),Mm=B.getEdgeHelpers(),nb=B.getEditHelperSize(),_f=nb/2,vf=function(q,i,c,O){"leftTop"===i?(xj=h.x*v-nb-L-("h"===O?c*(nb+L):0)-1,Oe=h.y*v-nb-L-("v"===O?c*(nb+L):0)-1):"rightTop"===i?(xj=(h.x+h.width)*v+L+("h"===O?c*(nb+L):0)+1,Oe=h.y*v-nb-L-("v"===O?c*(nb+L):0)-1):"leftBottom"===i?(xj=h.x*v-nb-L-("h"===O?c*(nb+L):0)-1,Oe=(h.y+h.height)*v+L+("v"===O?c*(nb+L):0)+1):"rightBottom"===i&&(xj=(h.x+h.width)*v+L+("h"===O?c*(nb+L):0)+1,Oe=(h.y+h.height)*v+L+("v"===O?c*(nb+L):0)+1);var Y=xj+_f,t=Oe+_f,b=(h.x+h.width/2)*v,G=(h.y+h.height/2)*v,s=_e({x:b,y:G},Y-b,t-G,P);if("host"===q){if(Q>0)return g.$77l(_,P,s),!0}else if("edge"===q){if(w>0)return g.$80l(_,P,s),!0}else if("remove"===q){if(R>0)return Bl&&1===Bl.length&&Bl[0]instanceof y?g.$81l(_,P,{x:b+nb/2+5,y:G}):g.$81l(_,P,s),!0}else if("parent"===q){if(K>0)return Bl&&1===Bl.length&&Bl[0]instanceof y?g.$76l(_,P,{x:b-nb/2-5,y:G}):g.$76l(_,P,s),!0}else if("elevation"===q){if(Mj>0)return g.$85l(_,P,s),!0}else if("tall"===q){if(gh>0)return g.$86l(_,P,s),!0}else if("source"===q||"target"===q){var m=Bl[0],r=B.getDataUI(m),U=ts(r,!0),J=U[0],S=U[1];if(Ve&&"source"===q)return g.$84l(_,h,J,!0,m.isLooped(),i,c,O),!0;if(qs&&"target"===q)return g.$84l(_,h,S,!1,m.isLooped(),i,c,O),!0}};if(Eq&&Eq.length>0){var Lk=0;Eq.forEach(function(s){vf(s,"leftTop",Lk,B.getLeftTopHelpersAlign()||"h")&&Lk++})}if(hq&&hq.length>0){var Lk=0;hq.forEach(function(J){vf(J,"rightTop",Lk,B.getRightTopHelpersAlign()||"h")&&Lk++})}if($j&&$j.length>0){var Lk=0;$j.forEach(function(u){vf(u,"leftBottom",Lk,B.getLeftBottomHelpersAlign()||"h")&&Lk++})}if(Vp&&Vp.length>0){var Lk=0;Vp.forEach(function(c){vf(c,"rightBottom",Lk,B.getRightBottomHelpersAlign()||"h")&&Lk++})}if(Mm&&Mm.length>0&&((Ve||qs)&&Bl&&1===Bl.length&&Bl[0]instanceof y?!0:!1)){var Lk=0;Mm.forEach(function(r){vf(r,"edge",Lk,"h")&&Lk++})}if(g.$72l){var $c,sc=g.$67l,Cl=g.$68l,Vo=g.$69l,Wl=(g.$71l,g.$70l),Ii=g.$82l,ws=g.$83l;if(1===sc?$c=Cl:2===sc?$c=Vo:3===sc?$c=Wl:5===sc?$c=Ii:6===sc&&($c=ws),$c){var Mo=B.lp(g.$72l),Dm=B.getDataAt(g.$72l);if(Dm&&Dm instanceof k){var uc,Zo,gs;if(g.$73l=Dm,1===sc)if(Dm instanceof c.Grid)uc=g.$75l=yq(Dm,Mo);else if(Dm instanceof c.Shape){gs=g.$74l=pe(Dm,Mo);var xh=Dm.getPoints();if(gs){var Ur=gs.attachIndex,qq=Rl(Dm,B.getDataUI(Dm),Ur)+1,Rr=qq+1>=xh.size()?0:qq+1,Hc=xh.get(qq),Ok=xh.get(Rr),Ho=Dm.p(),_g=Dm.getRotation();Hc=_e(Ho,Hc.x-Ho.x,Hc.y-Ho.y,_g),Ok=_e(Ho,Ok.x-Ho.x,Ok.y-Ho.y,_g),_.beginPath(),_.strokeStyle=H,_.lineWidth=C,_.moveTo(Hc.x*v,Hc.y*v),_.lineTo(Ok.x*v,Ok.y*v),_.stroke()}}uc?Zo=uc.rect:(Zo=Y.clone(B.getDataUIBounds(Dm)),Y.grow(Zo,2)),_.beginPath(),_.rect(Zo.x*v,Zo.y*v,Zo.width*v,Zo.height*v),_.strokeStyle=1===sc||4===sc||6===sc?V:T,_.lineWidth=2,_.setLineDash&&_.setLineDash([8,8]),_.stroke()}else delete g.$73l;Mo.x=Mo.x*v,Mo.y=Mo.y*v;var th=Do($c.x,$c.y,Mo.x,Mo.y),fi=_e($c,Mo.x-$c.x,Mo.y-$c.y,-th),Ub=fi.x-$c.x;_.save(),_.translate($c.x,$c.y),_.rotate(th),x.width=Ub,x.height=40;var Qk=T;(1===sc||4===sc||6===sc)&&(Qk=V),x.comps[0].gradientColor=Qk,Y.drawImage(_,x,0,-20,Ub,40),_.restore()}}}if(F.each(function(b){var o=B.getDataUI(b);if(o){var c,d,l=o._55O,p=o._78o;if(l&&l._43O&&b instanceof Z?(c=l.$15l,d=b.getSegments(),d&&d.size()||(d=xc(c)),b.isClosePath()&&d.indexOf(5)<0&&(d=new i(d._as),d.add(5))):l&&p&&l._43O&&(c=b.s("edge.points"),d=b.s("edge.segments"),c=Pd(o,c),d&&d.size()||(d=xc(c)),c&&(c=c._as)),c&&d){var F=0,e=d.size(),k=g._hoverSegmentIndex;c=c.slice(0);for(var V=0;V<c.length;V++)c[V]=nf(c[V],v);_.beginPath(),_.strokeStyle=z,_.lineWidth=1,F=0;for(var V=0;e>V;V++){var E=d.get(V);if(1===E||2===E)F++;else if(3===E){var O=c[F-1],D=c[F],x=c[F+1];_.moveTo(O.x,O.y),_.lineTo(D.x,D.y),_.lineTo(x.x,x.y),F+=2}else if(4===E){var O=c[F-1],M=c[F],N=c[F+1],x=c[F+2];_.moveTo(O.x,O.y),_.lineTo(M.x,M.y),_.moveTo(N.x,N.y),_.lineTo(x.x,x.y),F+=3}}if(_.stroke(),m===b||f===b&&"points"===f.s("edge.type")){_.beginPath(),F=0,_.strokeStyle=H,_.lineWidth=C;for(var V=0;e>V;V++){var E=d.get(V);if(1===E||2===E){if(k===V){var O=c[F-1],x=c[F];_.moveTo(O.x,O.y),_.lineTo(x.x,x.y);break}F++}else if(3===E){if(k===V){var O=c[F-1],D=c[F],x=c[F+1];_.moveTo(O.x,O.y),_.quadraticCurveTo(D.x,D.y,x.x,x.y);break}F+=2}else if(4===E){if(k===V){var O=c[F-1],M=c[F],N=c[F+1],x=c[F+2];_.moveTo(O.x,O.y),_.bezierCurveTo(M.x,M.y,N.x,N.y,x.x,x.y);break}F+=3}else if(5===E&&k===V){var O=c[F-1],x=c[0];_.moveTo(O.x,O.y),_.lineTo(x.x,x.y);break}}_.stroke()}_.beginPath(),F=0,_.strokeStyle=W,_.lineWidth=1,_.fillStyle=j;for(var V=0;e>V;V++){var E=d.get(V);if(1===E||2===E){var x=c[F];_.moveTo(x.x+L,x.y),_.arc(x.x,x.y,L,0,$,!0),F++}else if(3===E){var x=c[F+1];_.moveTo(x.x+L,x.y),_.arc(x.x,x.y,L,0,$,!0),F+=2}else if(4===E){var x=c[F+2];_.moveTo(x.x+L,x.y),_.arc(x.x,x.y,L,0,$,!0),F+=3}}_.fill(),_.stroke(),_.beginPath(),F=0,_.strokeStyle=q,_.lineWidth=1,_.fillStyle=U;for(var V=0;e>V;V++){var E=d.get(V);if(1===E||2===E)F++;else if(3===E){var D=c[F];_.moveTo(D.x+L,D.y),_.arc(D.x,D.y,L,0,$,!0),F+=2}else if(4===E){var M=c[F],N=c[F+1];_.moveTo(M.x+L,M.y),_.arc(M.x,M.y,L,0,$,!0),_.moveTo(N.x+L,N.y),_.arc(N.x,N.y,L,0,$,!0),F+=3}}if(_.fill(),_.stroke(),_.beginPath(),F=0,_.strokeStyle=G,_.lineWidth=2,(m===b||f===b)&&g.$9l!=A){var x=c[g.$9l];_.moveTo(x.x+L,x.y),_.arc(x.x,x.y,L,0,$,!0),_.stroke()}}}}),g.$87l&&B.sm().contains(g.$87l)){var Rk,Af=g.$87l,ag=g.$88l,nb=B.getEditHelperSize(),_f=nb/2;if(B.isHelperEditable(Af,"pointElevation"))if(Af instanceof Z){var eo=Af.getPosition();Rk=Y.clone(Af.getPoints().get(ag)),Rk=_e({x:eo.x,y:eo.y},Rk.x-eo.x,Rk.y-eo.y,Af.getRotation()),Rk.x*=v,Rk.y*=v,_.translate(Rk.x,Rk.y),Y.drawImage(_,Y.getImage("xeditinteractor_elevationIcon"),_f,-_f,nb,nb),_.translate(-Rk.x,-Rk.y),g._pointElevationHelperPoint={x:Rk.x+nb,y:Rk.y}}else if(Af instanceof y){var Ql=Pd(B.getDataUI(Af),Af.s("edge.points")),Rk=Y.clone(Ql.get(ag));Rk.x*=v,Rk.y*=v,_.translate(Rk.x,Rk.y),Y.drawImage(_,Y.getImage("xeditinteractor_elevationIcon"),_f,-_f,nb,nb),_.translate(-Rk.x,-Rk.y),g._pointElevationHelperPoint={x:Rk.x+nb,y:Rk.y}}}_.restore(),g.$5l=0}},$89l:function(S,B,V,K){S.save();var t=this,$=t.gv,e=$.getEditHelperSize(),k=e/2;S.beginPath(),S.translate(V.x,V.y),S.rotate(B),Y.drawImage(S,K,-k,-k,e,e),S.restore()},$85l:function(Q,q,E){var C=this;C.$90l=E,C.$89l(Q,q,E,Y.getImage("xeditinteractor_elevationIcon"))},$86l:function(j,H,W){var r=this;r.$91l=W,r.$89l(j,H,W,Y.getImage("xeditinteractor_tallIcon"))},$77l:function(J,l,m){var $=this;$.$68l=m,$.$89l(J,l,m,Y.getImage("xeditinteractor_hostIcon"))},$80l:function(D,R,y){var s=this;s.$70l=y,s.$89l(D,R,y,Y.getImage("xeditinteractor_edgeIcon"))},$81l:function(f,w,W){var j=this;j.$71l=W,j.$89l(f,w,W,Y.getImage("xeditinteractor_removeIcon"))},$76l:function(s,I,y){var U=this;U.$69l=y,U.$89l(s,I,y,Y.getImage("xeditinteractor_parentIcon"))},$84l:function(c,T,Z,j,n){var z,R=this,$=R.gv,l=$.getZoom(),x=$.getEditHelperSize(),q=x/2;Z.x*=l,Z.y*=l,n&&(j?Z.x-=q+5:Z.x+=q+5),Z.y-=x-2,j?(R.$82l=Z,z=Y.getImage("xeditinteractor_sourceIcon")):(R.$83l=Z,z=Y.getImage("xeditinteractor_targetIcon")),c.beginPath(),c.translate(Z.x,Z.y),Y.drawImage(c,z,-q,-q,x,x),c.translate(-Z.x,-Z.y)},$44l:function(H,k,W){H.save();var e=this.gv.getZoom(),L=s(l(k.width,2)+l(k.height,2))/2*e+10,F=L,c=F+8,Y=F+18,m=W,T=k.x+k.width/2,j=k.y+k.height/2;H.translate(T*e,j*e),H.beginPath(),H.strokeStyle="rgb(150, 150, 150)";for(var u=0,O=0,K=0,_=0,g=0,N=0;360>N;N++)u=N*M/180,0===N%5&&(O=R(u)*F,K=G(u)*F,_=R(u)*c,g=G(u)*c,H.moveTo(O,K),H.lineTo(_,g)),0===N%45&&(O=R(u)*F,K=G(u)*F,_=R(u)*Y,g=G(u)*Y,H.moveTo(O,K),H.lineTo(_,g));H.stroke(),H.beginPath(),H.rotate(-f),H.beginPath(),H.fillStyle="rgba(255, 0, 0, 0.1)",H.strokeStyle="rgb(157, 157, 157)",H.moveTo(0,0),H.arc(0,0,Y,0,W,!1),H.fill(),H.beginPath(),H.moveTo(0+Y,0),H.arc(0,0,Y,0,W,!1),H.stroke(),H.rotate(f),H.font="bold 12px Verdana, Arial";var Q=20*G(m),q=20*R(m),I=w(180*m/M)+"°";H.textAlign="center",H.textBaseline="middle",H.beginPath();var C=H.measureText("365.°").width;H.fillStyle="white",H.rect(Q-C/2,-q-10,C,20),H.fill(),H.beginPath(),H.fillStyle="rgb(79,79,79)",H.fillText(I,Q,-q),H.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);