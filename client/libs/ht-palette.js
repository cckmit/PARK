!function(t,E,Y){"use strict";var o="px",l="0",r="innerHTML",D="className",V=ht.Default,B=ht.Color,W=ht.Node,K="position",$="top",F="left",e=V.animate,x=V.getInternal(),G="width",l="0",I="none",Z="max-height",s="font",C="background",m="border-box",S="user-select",J="box-sizing",u="overflow",i=V.isTouchable,x=V.getInternal(),X=B.titleIconBackground,d=V.scrollBarInteractiveSize,L=/msie 9/.test(t.navigator?t.navigator.userAgent.toLowerCase():""),c=null,M=function(){return document},n=function(V){return M().createElement(V)},O=function(){return n("div")},T=function(){var Q=O(),S=Q.style;return S.msTouchAction=I,S.cursor="default",i&&S.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",c),S.position="absolute",S.left=l,S.top=l,Q},U=function(){return n("canvas")},b=function(){return document.body},H=function(H,$,I){H.style.setProperty($,I,c)},g=function(r,c){r.style.removeProperty(c)},q=function(i,f,s){V.def(ht.widget[i],f,s)},N=function(l,B){l.appendChild(B)},A=function(Y,T){Y.removeChild(T)},R=x.addEventListener;x.removeEventListener,x.addMethod(V,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:X,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:X}]},paletteTitleLabelColor:V.labelSelectColor,paletteTitleLabelFont:V.labelFont,paletteContentLabelFont:V.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:V.widgetTitleHeight,paletteTitleBackground:B.titleBackground,paletteTitleHoverBackground:B.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:Y,paletteItemHoverBorderColor:B.highlight,paletteItemSelectBackground:B.highlight},!0);var v=".palette-item:hover{border: 1px solid "+V.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+V.paletteTitleHoverBackground+" !important}",p=document.createElement("style");i||(p.styleSheet?p.styleSheet.cssText=v:p.appendChild(M().createTextNode(v))),M().getElementsByTagName("head")[0].appendChild(p);var h=function(Z){var O=this;O.$22h=Z,O.addListeners()};V.def(h,E,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var g=this;g.$36h&&b().removeChild(g.$36h),g.$23h=g.$24h=g.$25h=g.$35h=g.$36h=c},handle_touchstart:function(U){for(var z,A=this,l=A.$22h,H=U.target,B=l.sm(),u=l.dm(),$="palette-header",h="palette-header-tool",x="palette-item",Q=!1,m=!1,r=!1;H&&(H[D]||"").indexOf($)<0&&(H[D]||"").indexOf(x)<0;)H=H.parentNode;if(H&&H[D].indexOf(h)>=0?Q=!0:H&&H[D].indexOf($)>=0?r=!0:H&&H[D].indexOf(x)>=0&&(m=!0),V.isLeftButton(U))if(A.$27h(U))A.$24h=V.getClientPoint(U),A.$25h=l.ty();else if(Q){V.preventDefault(U),z=H.parentNode.$11h;var q=u.getDataById(z),Z=q.s("tools")[H.toolIndex];Z.action&&Z.action.call(l)}else if(r){V.preventDefault(U),z=H.$11h;var q=u.getDataById(z);q.isExpanded()?q.setExpanded(!1):q.setExpanded(!0)}else if(m){z=H.$11h;var y=u.getDataById(z);B.ss(y),l.handleDragAndDrop&&(V.preventDefault(U),y.s("draggable")&&(l.handleDragAndDrop(U,"prepare"),A.$35h=0)),y.s("draggable")||(V.preventDefault(U),A.$24h=V.getClientPoint(U),A.$25h=l.ty())}else V.preventDefault(U),A.$24h=V.getClientPoint(U),A.$25h=l.ty();else A.$26h(U)},handle_mousedown:function(e){this.handle_touchstart(e)},handle_mousewheel:function(z){this.handleScroll(z,z.wheelDelta/40,z.wheelDelta!==z.wheelDeltaX)},handle_DOMMouseScroll:function(E){this.handleScroll(E,-E.detail,1)},handleScroll:function(R,B,C){var u=this.$22h;V.preventDefault(R),C&&u._41o()&&u.ty(u.ty()+20*B)},handle_mouseup:function(W){this.handle_touchend(W)},handle_touchend:function(Y){var U=this;U.$37h(Y),U.$26h(Y)},handleWindowMouseUp:function(Z){this.handleWindowTouchEnd(Z)},handleWindowTouchEnd:function(r){var C=this;C.$37h(r),C.$26h(r)},$37h:function(f){var q=this,y=q.$22h;2===q.$35h&&(q.$35h=3,y.handleDragAndDrop(f,"end"))},handleWindowMouseMove:function(h){this.handleWindowTouchMove(h)},handleWindowTouchMove:function(z){var d=this,G=d.$22h,O=d.$23h,D=d.$24h,q=d.$25h,B=V.getClientPoint(z),E=G._29I,X=d.$36h;if(1===d.$35h||2===d.$35h){if(d.$35h=2,G.handleDragAndDrop(z,"between"),i){var $=z.touches[0];z=$?$:z.changedTouches[0]}X.style.left=z.pageX-parseInt(X.width)/2+o,X.style.top=z.pageY-parseInt(X.height)/2+o}else"p"===O?G.ty(q+B.y-D.y):"v"===O&&G.ty(q+(D.y-B.y)/E.height*G._59I)},handle_mousemove:function(n){this.handle_touchmove(n)},handle_touchmove:function(t){if(!V.isDragging()&&V.isLeftButton(t)){var u=this,Y=u.$22h,q=u.$27h(t);if(u.$24h){if(!u.$23h){if(V.getDistance(V.getClientPoint(t),u.$24h)<2)return;u.$23h=q?"v":"p",V.startDragging(u)}}else if(q)Y._43o();else if(0===u.$35h){if(u.$35h=1,Y.handleDragAndDrop(t,"begin"),i){var n=t.touches[0];t=n?n:t.changedTouches[0]}var X=u.$36h=new Image,T=Y.$10h[Y.sm().ld().getId()].querySelector(".image-box"),v=parseInt(T.style.width),E=parseInt(T.style.height);X.draggable=!1,X.src=T.toDataURL(),X.width=v,X.height=E,X.style.position="absolute",X.style.left=t.pageX-v/2+o,X.style.top=t.pageY-E/2+o,b().appendChild(X),V.startDragging(u)}}},$27h:function(F){var z=this.$22h,W=z.getView(),P=W.getBoundingClientRect(),y=z._29I,b=F.clientX-P.left+W.scrollLeft;return z._41o()&&y.x+y.width-b<d}}),ht.widget.Palette=function(B){var Z=this,M=Z._view=x.createView(null,Z);Z.$9h={},Z.$10h={},Z.$4h={},Z._29I={x:0,y:0,width:0,height:0},Z._59I=0,Z.dm(B?B:new ht.DataModel),M[D]="ht-widget-palette",Z.$29h=new h(Z),H(M,C,V.paletteContentBackground),H(M,u,"auto"),H(M,J,m),H(M,"-moz-"+J,m),H(M,"-webkit-"+S,I),H(M,"-moz-"+S,I),H(M,"-ms-"+S,I),H(M,S,I),H(M,"position","absolute"),H(M,"overflow","hidden"),N(M,Z._79O=T()),R(M,"dragstart",function(O){O.dataTransfer&&(O.dataTransfer.setData("Text","nodeid:"+O.target.$11h),O.dataTransfer.effectAllowed="all",Z.$29h.$26h())})},q("Palette",E,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:V.autoHideScrollBar,_scrollBarSize:V.scrollBarSize,_scrollBarColor:V.scrollBarColor,getViewRect:function(){return this._29I},ty:function(R){return R==c?this.getTranslateY():(this.setTranslateY(R),void 0)},setTranslateY:function(j){if(this.$32h==c){var u=this,l=u.$33h(j),q=u.$30h;u.$30h=l,u.fp("translateY",q,l)}},getTranslateY:function(){return this.$30h},setLayout:function(Y){var k,s,Z=this,X=Z._layout;Z._layout=Y,"smallicons"===Y?k=s=20:"iconsonly"===Y?k=s=50:(k=70,s=50),Z.setItemImageWidth(k),Z.setItemImageHeight(s),Z.setItemImagePadding(4),Z.fp("layout",X,Y)},getDataAt:function(n){for(var B=n.target;B&&B.$11h==c;)B=B.parentNode;return B&&B.$11h!=c?this.getDataModel().getDataById(B.$11h):void 0},$20h:function(){var L=16;return i&&(L*=1.2),L},$19h:function(){return V.paletteTitleHeight},$18h:function(){var O=V.paletteSeparatorWidth,W=V.paletteTitleBackground,b=V.paletteSeparatorColor||V.brighter(W);return O+o+" solid "+b},$17h:function(K){H(K,"cursor","pointer"),H(K,"display","inline-block"),H(K,"margin-right",(i?8:4)+o),H(K,"vertical-align",$)},$1h:function(A){var c=this,S=O(),t=O(),W=n("span");S[D]="palette-header",H(S,K,"relative"),H(S,C,V.paletteTitleBackground),H(S,"color",V.paletteTitleLabelColor),H(S,$,l),H(S,J,m),H(S,"-moz-"+J,m),H(S,"padding","0 5px 0 0"),H(S,"border-top",c.$18h()),H(S,G,"100%"),H(S,"cursor","pointer"),H(S,"white-space","nowrap"),H(S,u,"hidden"),H(S,s,V.paletteTitleLabelFont),H(S,"line-height",c.$19h()+o),S.$11h=A.getId();var v=U(),b=c.$19h(),z=c.$20h();c.$17h(v),x.setCanvas(v,z,b),N(S,v);var f=A.s("tools");if(f)for(var Q=0;Q<f.length;Q++){var j=U();c.$17h(j),x.setCanvas(j,z,b),j[D]="palette-header-tool palette-header-tool"+A.getId()+"-"+Q,j.style.position="absolute",j.style.right=(z+10)*Q+"px",j.toolIndex=Q,N(S,j)}return v[D]="palette-toggle-icon-"+A.getId(),t[D]="palette-content",H(t,"max-height",0+o),H(t,s,V.paletteContentLabelFont),H(t,u,"hidden"),t.$11h=A.getId(),c.$9h[A.getId()]=t,W[r]=A.getName(),H(W,s,V.paletteTitleLabelFont),N(S,v),N(S,W),[S,t]},$2h:function(z){var Z=this,B=Z._layout,E=L&&z.s("draggable")?n("a"):O(),W=U(),A=O(),a=z.getName()||"",_=z.s("title")||z.getToolTip()||a,k=Z._itemMargin;W[D]="image-box";var s=Z.getItemImageWidth(),b=Z.getItemImageHeight();return x.setCanvas(W,s,b),N(E,W),A[r]=a,A[D]="label-box","iconsonly"!==B&&N(E,A),E[D]="palette-item",H(E,"vertical-align",$),H(E,"cursor","pointer"),H(E,"border-radius",5+o),H(E,"border","1px solid transparent"),H(E,"text-align","center"),H(E,"display","inline-block"),H(E,"margin-left",k+o),H(E,"margin-top",k+o),H(E,"color",V.paletteContentLabelColor),"smallicons"===B?(H(W,"vertical-align","middle"),H(E,"margin-left",2+o),H(E,"margin-top",2+o),H(E,"padding",2+o),H(E,"text-align",F),H(A,"display","inline-block"),H(A,"min-width",Z.$21h+Z._itemMargin+o)):"largeicons"===B&&(H(A,"max-width",s+o),H(A,"overflow","hidden")),E.$11h=z.getId(),_&&(E.title=_),z.s("draggable")&&!Z.handleDragAndDrop&&(L?(E.href="#",H(E,"text-decoration",I)):E.draggable="true"),E},$16h:function(A,$,T,f){var U=x.initContext(A);x.translateAndScale(U,0,0,1),U.clearRect(0,0,T,T);var F=(T-f)/2;V.drawStretchImage(U,V.getImage($),"fill",0,F,f,f),U.restore()},$15h:function(k){var F=this,n=k.getId(),N=F._view.querySelector(".palette-toggle-icon-"+n),y=k.isExpanded()?V.paletteCollapseIcon:V.paletteExpandIcon;if(N&&y){var x=F.$19h(),B=F.$20h();F.$16h(N,y,x,B)}},_drawToolsIcon:function(b){var X=this,z=b.s("tools");if(z)for(var P=0;P<z.length;P++){var J=X._view.querySelector(".palette-header-tool"+b.getId()+"-"+P),G=z[P].icon,s=X.$19h(),E=X.$20h();X.$16h(J,G,s,E)}},$14h:function(L){var O=this,R=L.getId(),o=O.$10h[R].querySelector(".image-box"),G=L.getImage(),l=L.s("image.stretch");if(o&&G){var D=x.initContext(o),r=O.getItemImagePadding();r="smallicons"===O._layout?r/2:r;var P=O.getItemImageWidth()-2*r,g=O.getItemImageHeight()-2*r;x.translateAndScale(D,0,0,1),D.clearRect(0,0,P,g),V.drawStretchImage(D,V.getImage(G),l,r,r,P,g,L,O),D.restore()}},validateImpl:function(){var E,b,u,J=this,T=J.$9h,B=J._layout,w=J.$10h,h=J.$4h,Y=J._view,D=J.dm();if(J.$13h&&(delete J.$13h,h={},D.each(function(M){h[M.getId()]=M})),"smallicons"===B)for(var v in h){var g=h[v];if(g instanceof W){var k=g.getName()||"",x=V.getTextSize(V.paletteContentLabelFont,k).width;J.$21h!=c&&J.$21h>x||(J.$21h=x)}}for(var v in h){u=h[v];var m,C;if(D.contains(u)){if(u instanceof ht.Group){var f,L=J.$1h(u),X=w[u.getId()];X&&(f=X.nextSibling,A(Y,f),A(Y,X)),b=D.getSiblings(u).indexOf(u);var j=Y.children[2*b]||J._79O;j&&j.parentNode?(Y.insertBefore(L[0],j),Y.insertBefore(f||L[1],j)):(Y.appendChild(L[0]),Y.appendChild(f||L[1])),w[u.getId()]=L[0],E=T[u.getId()]=f||L[1],C=u.$12h;var R=u.s("promptText");C||(u.$12h=n("div"),u.$12h[r]=R||"",C=u.$12h),0===u.getChildren().size()?E.contains(C)||N(E,C):E.contains(C)&&A(E,C)}else if(m=u.getParent()){var q=J.$2h(u),t=w[u.getId()];E=T[m.getId()],t&&A(t.parentNode,t),b=D.getSiblings(u).indexOf(u);var S=E.children[b];S?E.insertBefore(q,S):N(E,q),w[u.getId()]=q,J.$14h(u)}}else{var K=w[u.getId()],I=K.parentNode;if(u instanceof ht.Group){var F=K.nextSibling;A(Y,K),A(Y,F),delete T[u.getId()]}else A(I,K),0===I.children.length&&(m=D.getDataById(I.$11h),m&&(C=m.$12h,C&&!I.contains(C)&&N(I,C)));delete w[u.getId()]}}J.$4h={};var d=function(){var t=J._59I,X=0;J.$32h!=c&&(clearInterval(J.$32h),X=0,delete J.$32h),J.$32h=setInterval(function(){J.$31h(),t===J._59I?(X++,X>=2&&(clearInterval(J.$32h),delete J.$32h)):(X=0,t=J._59I)},30)};for(var U in T)if(E=T[U],u=D.getDataById(T[U].$11h),J.$15h(u),J._drawToolsIcon(u),u.isExpanded()){if(E.style.maxHeight===0+o){var p=E.scrollHeight+J._itemMargin+o;e(E).duration(200).set(Z,p).set("padding-bottom",J._itemMargin+o).end(function(){return function(){d()}}(p))}else E.style.maxHeight=E.scrollHeight+o;E.style.paddingBottom=J._itemMargin+o}else E.style.maxHeight!==0+o&&e(E).duration(200).set(Z,l).set("padding-bottom",l).end(function(){return function(){d()}}(E));J.$28h(),J.$31h()},$31h:function(){for(var c=this,M=c._view,O=0,p=M.children,b=0;b<p.length;b++){var Q=p[b];Q.className&&Q.className.indexOf("palette-")>=0&&(O+=Q.offsetHeight)}c._59I=O,c.$30h=c.$33h(c.ty());var C=c.ty();M.scrollTop=-C,c._29I={x:0,y:-C,width:M.clientWidth,height:M.clientHeight},H(c._79O,$,-C+o),c._93I()},$33h:function(M){var Q=this,d=Q._29I.height-Q._59I;return d>M&&(M=d),M>0?0:Math.round(M)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(r){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(r.property)<0&&this.redraw(),"translateY"===r.property&&(this.iv(),this._43o())},findDataByName:function(b){for(var V=this.dm().getDatas(),Q=0;Q<V.size();Q++){var T=V.get(Q);if(T.getName()===b)return T}},setDataModel:function(U){var u=this,r=u._dataModel,A=u._selectionModel;r!==U&&(r&&(r.umm(u.$6h,u),r.umd(u.$8h,u),r.umh(u.$7h,u),A||r.sm().ums(u.$28h,u)),u._dataModel=U,U.mm(u.$6h,u),U.md(u.$8h,u),U.mh(u.$7h,u),A?A._21I(U):U.sm().ms(u.$28h,u),u.sm().setSelectionMode("single"),u.fp("dataModel",r,U))},$6h:function(h){var P=this,d=P._view,x=h.data,k=P.$4h;"add"===h.kind?k[x.getId()]=x:"remove"===h.kind?k[x.getId()]=x:"clear"===h.kind&&(P.$10h={},P.$9h={},P.$4h={},d[r]=""),P.iv()},$7h:function(H){var J=this,v=H.data;J.$4h[v.getId()]=v,J.iv()},$8h:function(g){var V=this,P=g.data,f=g.property;"expanded"===f?V.iv():(V.$4h[P.getId()]=P,V.iv())},$28h:function(){var $,M=this,Q=M.sm(),Z="palette-item",o=Q.ld();this.dm().each(function(v){$=M.$10h[v.getId()],$&&$[D].indexOf(Z)>=0&&(v===o?H($,C,V.paletteItemSelectBackground):g($,C))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);