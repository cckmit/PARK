!function(C,q){"use strict";var K="ht",Z=C[K],r="innerHTML",c="className",h=null,f="px",z=Z.Default,p=z.getInternal(),E="0",v=function(){return document},n=function(m){return v().createElement(m)},S=function(){return n("canvas")},D=function(m,Q,k){m.style.setProperty(Q,k,h)},R=function(m,f,I){z.def(Z.widget[m],f,I)},m=function(V,U){V.appendChild(U)},y=function(H,b){H.removeChild(b)},P=p.addEventListener,A=p.removeEventListener,x=z.isTouchable;p.addMethod(z,{menuLabelFont:(x?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),Z.widget.Menu=function(w){var P=this,e=P._view=p.createView(null,P),U=P.$1g=new Z.widget.ContextMenu,C=n("ul");U._r=!0,U._view[c]+=" ht-widget-dropdownmenu",e[c]="ht-widget-menu",C[c]="header",D(e,"margin",E),D(e,"padding",E),D(e,"background",z.menuBackground),D(e,"-webkit-user-select","none"),D(e,"-moz-user-select","none"),D(e,"user-select","none"),D(e,"text-align","left"),D(e,"border-bottom",z.menuSeparatorWidth+"px solid "+z.menuSeparatorColor),D(e,"cursor","default"),D(e,"overflow","auto"),D(e,"white-space","nowrap"),D(e,"font",z.menuLabelFont),D(e,"color",z.menuLabelColor),D(e,"box-sizing","border-box"),D(e,"-moz-box-sizing","border-box"),D(C,"list-style","none"),D(C,"margin",E),D(C,"padding",E),D(C,"display","inline-block"),m(e,C),P.setItems(w),P.$2g=function(f){P.$3g(f)},P.$4g=function(j){P.$5g(j)},P.$6g=function(G){P.$7g(G)},P.$8g=function(w){P.$9g(w)},P.$9b=function(i){P.$10g(i)},P._autoShow=!0,P.setAutoShow(!1),U.afterHide=function(){P.$11g()},U.afterShow=function(){P.$12g()},A(v(),"keydown",U.$3b),P.$3b=function(i){P.$13g(i)},P.invalidate()},R("Menu",q,{_items:h,$14g:z.menuHoverBackground,$15g:z.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(Q){var t=this;if(t.$21g=Q,t.setItems(t._items),"largeicons"===Q){for(var y=t._view.querySelectorAll(".header-item"),Z=0,U=0;U<y.length;U++){var e=y[U];Z=Math.max(Z,e.clientWidth)}for(var U=0;U<y.length;U++){var e=y[U];D(e,"min-width",Z+f)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(T){this.$22g=T;for(var U=this._view.querySelectorAll(".header-item"),S=0;S<U.length;S++){var z=U[S];D(z,"margin-left",T+f),D(z,"margin-right",T+f)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(M){this.$23g=M;for(var R=this._view.querySelectorAll(".header-item"),_=0;_<R.length;_++){var z=R[_];D(z,"margin-top",M+f),D(z,"margin-bottom",M+f)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(r){this.$24g=r,D(this._view,"text-align",r)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var I=this,n=I._enableGlobalKey;n===!1&&(P(v(),"keydown",I.$3b),I._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,A(v(),"keydown",this.$3b)},setHoverBackground:function(s){this.$14g=s},setHoverColor:function(c){this.$15g=c},setItems:function(M){var s=this,l=s._view,I=s.$21g;if(s._items=M,l.children[0][r]="",s.$16g={},M&&M.length){for(var t=l.children[0],Z=0,L=v().createDocumentFragment();Z<M.length;Z++){var T=M[Z],P=n("li"),a=n("span");if(T.icon){var d=S();d[c]="menu-item-icon","smallicons"===I?(D(d,"height","1.2em"),D(d,"width","1.2em"),D(d,"vertical-align","middle")):(D(d,"height","32px"),D(d,"width","32px"),D(d,"display","block"),D(d,"margin","0 auto")),d.$20g=T.icon,m(P,d)}P[c]="header-item",D(P,"display","inline-block"),D(P,"vertical-align","top"),D(P,"padding","0 1.2em"),D(P,"line-height","1.8em"),"largeicons"===I&&D(P,"text-align","center"),D(P,"background-color","rgba(0,0,0,0)"),P.setAttribute("data-index",Z),s.$16g[Z]=T.items,a[r]=T.label,"iconsonly"!==I&&m(P,a),m(L,P)}m(t,L)}},showDropdownMenu:function(v){var W=this,P=W.$16g[v],m=W.$1g,C=W._view.children[0].children[v],O=W.$17g;if(C&&C!==O){O&&W.hideDropdownMenu();var N=C.getBoundingClientRect(),F=z.getWindowInfo();W.$17g=C,m.setItems(P),m.show(N.left+F.left,N.top+N.height+F.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(d,i){var s=this,Q=s._items;return Q&&0!==Q.length?s.$1g.getItemByProperty(d,i,Q):h},$12g:function(){var F=this,O=F.$17g;O.style.background=F.$14g,O.style.color=F.$15g,F._autoShow||P(v(),x?"touchstart":"mousedown",F.$9b)},$11g:function(){var R=this,i=R.$17g;i&&(i.style.background="",i.style.color="",R.$17g=h),A(v(),x?"touchstart":"mousedown",R.$9b)},$10g:function(O){var D=this,G=D._view,i=D.$1g,s=G.children[0];!v().body.contains(G)||s.contains(O.target)||i._view.contains(O.target)||D.hideDropdownMenu()},$13g:function(b){var e=this,x=e.$1g;v().body.contains(e._view)&&x.$13b.$4b.call(x.$13b,b,e._items)},setAutoShow:function(Q){var M=this,t=M.$1g,w=M._view;M._autoShow!==Q&&(M._autoShow?(A(w,"mouseover",M.$2g),A(w,"mouseout",M.$4g),A(t._view,"mouseout",M.$4g),x||(P(w,"mouseover",M.$8g),P(w,"mouseout",M.$8g)),P(w,x?"touchstart":"mousedown",M.$6g)):(A(w,"mouseover",M.$8g),A(w,"mouseout",M.$8g),A(w,x?"touchstart":"mousedown",M.$6g),A(v(),x?"touchstart":"mousedown",M.$9b),x||(P(w,"mouseover",M.$2g),P(w,"mouseout",M.$4g),P(t._view,"mouseout",M.$4g))),M._autoShow=Q)},$3g:function(A){var g=this,u=g._view.children[0],F=A.target;if(u!==F&&u.contains(F)){for(;"header-item"!==F[c];)F=F.parentNode;g.showDropdownMenu(F.getAttribute("data-index"))}},$5g:function(A){var t=this,o=t._view.children[0],E=t.$1g,c=A.target,x=A.relatedTarget;!o.contains(c)&&!E._view.contains(c)||o.contains(x)||E._view.contains(x)||t.hideDropdownMenu()},$7g:function(C){C.preventDefault();var K=this,_=K._view.children[0],Y=K.$1g,T=C.target;if(z.isLeftButton(C)&&_!==T&&_.contains(T))if(x){for(;"header-item"!==T[c];)T=T.parentNode;var h=T.getAttribute("data-index"),Y=K.$1g,u=K._view.children[0].children[h],W=K.$17g;Y.isShowing()&&K.hideDropdownMenu(),u!==W&&K.showDropdownMenu(h)}else if(Y.isShowing())K.hideDropdownMenu();else{for(;"header-item"!==T[c];)T=T.parentNode;K.showDropdownMenu(T.getAttribute("data-index"))}},$9g:function(m){var F=this,D=F._view,x=F.$1g,X=m.target;if(D.contains(X)){for(var K=D.querySelectorAll(".header-item"),z=h,i=0;i<K.length;i++){var v=K[i];v.style.background="",v.style.color="","mouseover"===m.type?v.contains(X)&&(z=v):"mouseout"===m.type&&x.isShowing()&&F.$17g===v&&(z=v)}x.isShowing()&&(z||(z=F.$17g),F.showDropdownMenu(z.getAttribute("data-index"))),z&&(z.style.background=F.$14g,z.style.color=F.$15g)}},getShowingMenuIndex:function(){var k=this.$17g;return k?k.getAttribute("data-index"):-1},addTo:function(l){var z=this,y=z._view;m(l,y),z.invalidate()},dispose:function(){var X=this,H=X._view,G=X.$1g;H&&(X._autoShow?(A(H,"mouseover",X.$2g),A(H,"mouseout",X.$4g),A(G._view,"mouseout",X.$4g)):(A(H,"mouseover",X.$8g),A(H,"mouseout",X.$8g),A(H,x?"touchstart":"mousedown",X.$6g),A(v(),x?"touchstart":"mousedown",X.$9b)),A(v(),"keydown",X.$3b),G.dispose(),H.parentNode&&y(H.parentNode,H),X._view=X.$1g=X.$16g=X._items=X.$17g=X.$2g=X.$4g=X.$6g=X.$8g=X.$9b=X.$3b=h)},$19g:function(y,R,u,n){var J=p.initContext(y);p.translateAndScale(J,0,0,1),J.clearRect(0,0,u,n),z.drawStretchImage(J,z.getImage(R),"fill",0,0,u,n),J.restore()},validateImpl:function(){var l,b,g,V=this,S=V._view,k=S.querySelectorAll(".menu-item-icon");for(g=0;g<k.length;g++){var P=k[g];l=P.clientWidth,b=P.clientHeight,l&&b&&(p.setCanvas(P,l,b),V.$19g(P,z.getImage(P.$20g),l,b))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);